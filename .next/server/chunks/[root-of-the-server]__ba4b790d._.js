module.exports=[814747,(e,t,r)=>{t.exports=e.x("path",()=>require("path"))},522734,(e,t,r)=>{t.exports=e.x("fs",()=>require("fs"))},484199,(e,t,r)=>{"use strict";var i=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,a={},s={VercelOidcTokenError:()=>c};for(var u in s)i(a,u,{get:s[u],enumerable:!0});t.exports=((e,t,r,a)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of o(t))l.call(e,r)||void 0===r||i(e,r,{get:()=>t[r],enumerable:!(a=n(t,r))||a.enumerable});return e})(i({},"__esModule",{value:!0}),a);class c extends Error{constructor(e,t){super(e),this.name="VercelOidcTokenError",this.cause=t}toString(){return this.cause?`${this.name}: ${this.message}: ${this.cause}`:`${this.name}: ${this.message}`}}},254799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},798783,e=>{"use strict";var t=e.i(122458);e.s(["CandlestickApi",()=>t.PromiseCandlestickApi])},918622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},556704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},324725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},193695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},224361,(e,t,r)=>{t.exports=e.x("util",()=>require("util"))},29173,(e,t,r)=>{t.exports=e.x("@prisma/client",()=>require("@prisma/client"))},288840,e=>{"use strict";e.s(["getArray",0,e=>Array.isArray(e)?e:[],"safeJsonParse",0,(e,t)=>{if(!e)return t;try{return JSON.parse(e)??t}catch{return t}}])},476591,e=>{"use strict";let t={LONG:"LONG",SHORT:"SHORT",HOLD:"HOLD"},r=e=>{if(null==e)return null;if("number"==typeof e)return Number.isFinite(e)?e:null;if("string"==typeof e&&e.trim().length>0){let t=Number.parseFloat(e);return Number.isFinite(t)?t:null}return null},i=e=>{if("string"==typeof e){let t=e.trim();return t.length>0?t:null}return"number"==typeof e&&Number.isFinite(e)?e.toString():null},n=e=>{let t=i(e);return t?t.toUpperCase():null},o=(e,o)=>{if("object"!=typeof e||null===e)return null;let l=n(e.symbol??e.market??o);if(!l)return null;let a=(e=>{let r=i(e);if(!r)return null;let n=r.toUpperCase();return n in t?t[n]:null})(e.signal??e.side??e.action);if(!a)return null;let s=r(e.quantity??e.size??e.notional??e.amount),u=r(e.leverage??e.leverageRatio),c=r(e.profitTarget??e.target??e.profit_target),p=r(e.stopLoss??e.stop??e.stop_loss),d=i(e.invalidationCondition??e.invalidCondition??e.invalid_condition??e.invalidation_condition)??null;return{symbol:l,signal:a,quantity:s,leverage:u,profitTarget:c,stopLoss:p,invalidationCondition:d,confidence:r(e.confidence??e.confidenceScore??e.confidence_percent??e.confidence_percentage),status:i(e.status??e.executionStatus??e.execution_status)??null}},l=(e,t)=>{if("object"!=typeof e||null===e)return null;let r=n(e.symbol??t);if(!r)return null;let o=e.success??e.ok??e.executed;return{symbol:r,success:"boolean"==typeof o?o:1===o||"true"===o,error:i(e.error??e.reason??e.message)??null}},a=e=>{if("object"!=typeof e||null===e)return{decisions:[],results:[],raw:e};let t=[];for(let r of(e=>{let t=[];for(let r of["decisions","positions","actions","entries","closedPositions","signals"]){let i=e[r];Array.isArray(i)&&t.push(i)}return t})(e))if(Array.isArray(r))for(let e of r){let r=o(e);r&&t.push(r)}if(0===t.length){let r=o(e);r&&t.push(r)}let r=[];for(let t of(e=>{let t=[];for(let r of["results","executions","outcomes","closedPositions"]){let i=e[r];Array.isArray(i)&&t.push(i)}return t})(e))if(Array.isArray(t))for(let e of t){let t=l(e);t&&r.push(t)}return{decisions:t,results:r,raw:e}};e.s(["buildDecisionIndex",0,e=>{let t=new Map;for(let r of e){let e=a(r.metadata);if(!e.decisions.length)continue;let i=new Map;for(let t of e.results)i.set(t.symbol,t);for(let n of e.decisions){let e=n.symbol;!e||t.has(e)||t.set(e,{...n,toolCallId:r.id,createdAt:r.createdAt,toolCallType:r.toolCallType,result:i.get(e)??null})}}return t},"parseTradingToolCallMetadata",0,a])},78468,e=>{"use strict";var t=e.i(122458);e.s(["AccountApi",()=>t.PromiseAccountApi])},569867,e=>{"use strict";e.i(608808);var t=e.i(78468),r=e.i(274828),i=e.i(972172),n=e.i(218936),o=e.i(798003),l=e.i(188241);let a=e=>{if("number"==typeof e)return Number.isFinite(e)?e:null;if("string"==typeof e&&e.trim().length>0){let t=Number.parseFloat(e);return Number.isFinite(t)?t:null}return null};async function s(e){let t=await l.ExchangeSimulator.bootstrap(o.DEFAULT_SIMULATOR_OPTIONS),r=e.id||"default",i=t.getAccountSnapshot(r),n=Number.isFinite(i.equity)?i.equity:0,a=Number.isFinite(i.availableCash)?i.availableCash:void 0,s=Math.min(i.cashBalance,n),u=Math.max(a??s,0);return{totalValue:n,availableCash:u,total:n.toFixed(2),available:u.toFixed(2)}}async function u(e,l){let u=l?.fallbackToSimulator??!1;if(o.IS_SIMULATION_ENABLED)return s(e);if(!e.apiKey||0===e.apiKey.trim().length){if(u)return console.warn(`[getPortfolio] Missing API key for account ${e.accountIndex}; using simulator fallback.`),s(e);throw Error(`Missing API key for account index ${e.accountIndex}`)}let c=new t.AccountApi({baseServer:new n.ServerConfiguration(o.BASE_URL,{}),httpApi:new i.IsomorphicFetchHttpLibrary,middleware:[],authMethods:{apiKey:new r.ApiKeyAuthentication(e.apiKey)}});try{let t=await c.accountWithHttpInfo("index",e.accountIndex),r=t.data?.accounts?.[0]??{},i=a(r.totalAssetValue??r.total_asset_value??r.total)??0,n=a(r.availableBalance??r.available_balance??r.available),o=i>0&&null!=n?Math.min(n,i):n??i,l=Math.max(o??0,0);return{totalValue:i,availableCash:l,total:i.toFixed(2),available:l.toFixed(2)}}catch(t){if(u)return console.warn(`[getPortfolio] Failed to fetch live portfolio for account ${e.accountIndex}, using simulator fallback`,t instanceof Error?t.message:t),s(e);throw t}}e.s(["getPortfolio",()=>u])},928214,e=>{"use strict";e.i(608808);var t=e.i(78468),r=e.i(274828),i=e.i(972172),n=e.i(218936),o=e.i(798003),l=e.i(188241);let a=e=>{if("number"==typeof e)return Number.isFinite(e)?e:null;if("string"==typeof e){let t=Number.parseFloat(e);return Number.isFinite(t)?t:null}return null};async function s(e){let t=await l.ExchangeSimulator.bootstrap(o.DEFAULT_SIMULATOR_OPTIONS),r=e&&e.length>0?e:"default";return t.getOpenPositions(r).map(e=>{let t=e.quantity,r=e.avgEntryPrice??null,i=Number.isFinite(e.notional)?e.notional:null!=r?r*Math.abs(t):null!=e.markPrice?e.markPrice*Math.abs(t):null,n=null!=e.leverage&&Number.isFinite(e.leverage)?e.leverage:void 0;return{symbol:e.symbol,position:e.quantity.toFixed(4),quantity:t,sign:e.side,unrealizedPnl:e.unrealizedPnl.toFixed(2),realizedPnl:e.realizedPnl.toFixed(2),liquidationPrice:null,leverage:n,notional:null!=i?i.toFixed(2):void 0,entryPrice:r,markPrice:e.markPrice??null,exitPlan:null,confidence:null,signal:e.side,lastDecisionAt:null,decisionStatus:null}})}async function u(e,l,u,c){let p=c?.fallbackToSimulator??!1;if(o.IS_SIMULATION_ENABLED)return s(u);if(!e||0===e.trim().length){if(p)return console.warn(`[openPositions] Missing API key for account ${l}; using simulator fallback.`),s(u);throw Error(`Missing API key for account index ${l}`)}let d=new t.AccountApi({baseServer:new n.ServerConfiguration(o.BASE_URL,{}),httpApi:new i.IsomorphicFetchHttpLibrary,middleware:[],authMethods:{apiKey:new r.ApiKeyAuthentication(e)}});try{let e=await d.accountWithHttpInfo("index",l);return(e.data.accounts[0]?.positions??[]).map(e=>{let t=a(e.position)??0,r=a(e.avgEntryPrice),i=a(e.positionValue),n=null!=i&&0!==t?i/Math.abs(t):a(e.avgEntryPrice);return{symbol:e.symbol,position:e.position,quantity:t,sign:1===e.sign?"LONG":"SHORT",unrealizedPnl:e.unrealizedPnl,realizedPnl:e.realizedPnl,liquidationPrice:e.liquidationPrice,leverage:void 0,notional:e.positionValue,entryPrice:r,markPrice:n,exitPlan:null,confidence:null,signal:1===e.sign?"LONG":"SHORT",lastDecisionAt:null,decisionStatus:null}})}catch(e){if(p)return console.warn(`[openPositions] Failed to load live positions for account ${l}, using simulator fallback`,e instanceof Error?e.message:e),s(u);throw e}}e.s(["getOpenPositions",()=>u])},967030,e=>{e.v(t=>Promise.all(["server/chunks/[root-of-the-server]__6cacdf68._.js"].map(t=>e.l(t))).then(()=>t(783697)))},683671,e=>{e.v(t=>Promise.all(["server/chunks/[root-of-the-server]__d51507ad._.js"].map(t=>e.l(t))).then(()=>t(390391)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__ba4b790d._.js.map