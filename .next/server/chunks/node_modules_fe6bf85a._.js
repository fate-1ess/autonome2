module.exports=[155676,(e,t,r)=>{var n=e.r(688947).Stream,o=e.r(224361);function i(){this.source=null,this.dataSize=0,this.maxDataSize=1048576,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}t.exports=i,o.inherits(i,n),i.create=function(e,t){var r=new this;for(var n in t=t||{})r[n]=t[n];r.source=e;var o=e.emit;return e.emit=function(){return r._handleEmit(arguments),o.apply(e,arguments)},e.on("error",function(){}),r.pauseStream&&e.pause(),r},Object.defineProperty(i.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}}),i.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)},i.prototype.resume=function(){this._released||this.release(),this.source.resume()},i.prototype.pause=function(){this.source.pause()},i.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach((function(e){this.emit.apply(this,e)}).bind(this)),this._bufferedEvents=[]},i.prototype.pipe=function(){var e=n.prototype.pipe.apply(this,arguments);return this.resume(),e},i.prototype._handleEmit=function(e){this._released?this.emit.apply(this,e):("data"===e[0]&&(this.dataSize+=e[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(e))},i.prototype._checkIfMaxDataSizeExceeded=function(){if(!this._maxDataSizeExceeded&&!(this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",Error(e))}}},474973,(e,t,r)=>{var n=e.r(224361),o=e.r(688947).Stream,i=e.r(155676);function s(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2097152,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}t.exports=s,n.inherits(s,o),s.create=function(e){var t=new this;for(var r in e=e||{})t[r]=e[r];return t},s.isStreamLike=function(e){return"function"!=typeof e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e&&!Buffer.isBuffer(e)},s.prototype.append=function(e){if(s.isStreamLike(e)){if(!(e instanceof i)){var t=i.create(e,{maxDataSize:1/0,pauseStream:this.pauseStreams});e.on("data",this._checkDataSize.bind(this)),e=t}this._handleErrors(e),this.pauseStreams&&e.pause()}return this._streams.push(e),this},s.prototype.pipe=function(e,t){return o.prototype.pipe.call(this,e,t),this.resume(),e},s.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop){this._pendingNext=!0;return}this._insideLoop=!0;try{do this._pendingNext=!1,this._realGetNext();while(this._pendingNext)}finally{this._insideLoop=!1}},s.prototype._realGetNext=function(){var e=this._streams.shift();void 0===e?this.end():"function"!=typeof e?this._pipeNext(e):e((function(e){s.isStreamLike(e)&&(e.on("data",this._checkDataSize.bind(this)),this._handleErrors(e)),this._pipeNext(e)}).bind(this))},s.prototype._pipeNext=function(e){if(this._currentStream=e,s.isStreamLike(e)){e.on("end",this._getNext.bind(this)),e.pipe(this,{end:!1});return}this.write(e),this._getNext()},s.prototype._handleErrors=function(e){var t=this;e.on("error",function(e){t._emitError(e)})},s.prototype.write=function(e){this.emit("data",e)},s.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.pause&&this._currentStream.pause(),this.emit("pause"))},s.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.resume&&this._currentStream.resume(),this.emit("resume")},s.prototype.end=function(){this._reset(),this.emit("end")},s.prototype.destroy=function(){this._reset(),this.emit("close")},s.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null},s.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(Error(e))}},s.prototype._updateDataSize=function(){this.dataSize=0;var e=this;this._streams.forEach(function(t){t.dataSize&&(e.dataSize+=t.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)},s.prototype._emitError=function(e){this._reset(),this.emit("error",e)}},308881,(e,t,r)=>{t.exports=e.r(478900)},772388,(e,t,r)=>{"use strict";var n,o,i,s=e.r(308881),a=e.r(814747).extname,l=/^\s*([^;\s]*)(?:;|\s|$)/,u=/^text\//i;function c(e){if(!e||"string"!=typeof e)return!1;var t=l.exec(e),r=t&&s[t[1].toLowerCase()];return r&&r.charset?r.charset:!!(t&&u.test(t[1]))&&"UTF-8"}r.charset=c,r.charsets={lookup:c},r.contentType=function(e){if(!e||"string"!=typeof e)return!1;var t=-1===e.indexOf("/")?r.lookup(e):e;if(!t)return!1;if(-1===t.indexOf("charset")){var n=r.charset(t);n&&(t+="; charset="+n.toLowerCase())}return t},r.extension=function(e){if(!e||"string"!=typeof e)return!1;var t=l.exec(e),n=t&&r.extensions[t[1].toLowerCase()];return!!n&&!!n.length&&n[0]},r.extensions=Object.create(null),r.lookup=function(e){if(!e||"string"!=typeof e)return!1;var t=a("x."+e).toLowerCase().substr(1);return!!t&&(r.types[t]||!1)},r.types=Object.create(null),n=r.extensions,o=r.types,i=["nginx","apache",void 0,"iana"],Object.keys(s).forEach(function(e){var t=s[e],r=t.extensions;if(r&&r.length){n[e]=r;for(var a=0;a<r.length;a++){var l=r[a];if(o[l]){var u=i.indexOf(s[o[l]].source),c=i.indexOf(t.source);if("application/octet-stream"!==o[l]&&(u>c||u===c&&"application/"===o[l].substr(0,12)))continue}o[l]=e}}})},596572,(e,t,r)=>{t.exports=function(e){var t="function"==typeof setImmediate?setImmediate:"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:null;t?t(e):setTimeout(e,0)}},649175,(e,t,r)=>{var n=e.r(596572);t.exports=function(e){var t=!1;return n(function(){t=!0}),function(r,o){t?e(r,o):n(function(){e(r,o)})}}},131938,(e,t,r)=>{t.exports=function(e){Object.keys(e.jobs).forEach(n.bind(e)),e.jobs={}};function n(e){"function"==typeof this.jobs[e]&&this.jobs[e]()}},502271,(e,t,r)=>{var n=e.r(649175),o=e.r(131938);t.exports=function(e,t,r,i){var s,a,l,u,c=r.keyedList?r.keyedList[r.index]:r.index;r.jobs[c]=(s=t,a=c,l=e[c],u=function(e,t){c in r.jobs&&(delete r.jobs[c],e?o(r):r.results[c]=t,i(e,r.results))},2==s.length?s(l,n(u)):s(l,a,n(u)))}},357624,(e,t,r)=>{t.exports=function(e,t){var r=!Array.isArray(e),n={index:0,keyedList:r||t?Object.keys(e):null,jobs:{},results:r?{}:[],size:r?Object.keys(e).length:e.length};return t&&n.keyedList.sort(r?t:function(r,n){return t(e[r],e[n])}),n}},164095,(e,t,r)=>{var n=e.r(131938),o=e.r(649175);t.exports=function(e){Object.keys(this.jobs).length&&(this.index=this.size,n(this),o(e)(null,this.results))}},955828,(e,t,r)=>{var n=e.r(502271),o=e.r(357624),i=e.r(164095);t.exports=function(e,t,r){for(var s=o(e);s.index<(s.keyedList||e).length;)n(e,t,s,function(e,t){e?r(e,t):0===Object.keys(s.jobs).length&&r(null,s.results)}),s.index++;return i.bind(s,r)}},612684,(e,t,r)=>{var n=e.r(502271),o=e.r(357624),i=e.r(164095);function s(e,t){return e<t?-1:+(e>t)}t.exports=function(e,t,r,s){var a=o(e,r);return n(e,t,a,function r(o,i){o?s(o,i):(a.index++,a.index<(a.keyedList||e).length)?n(e,t,a,r):s(null,a.results)}),i.bind(a,s)},t.exports.ascending=s,t.exports.descending=function(e,t){return -1*s(e,t)}},785455,(e,t,r)=>{var n=e.r(612684);t.exports=function(e,t,r){return n(e,t,null,r)}},384918,(e,t,r)=>{t.exports={parallel:e.r(955828),serial:e.r(785455),serialOrdered:e.r(612684)}},750997,(e,t,r)=>{"use strict";t.exports=Object},772135,(e,t,r)=>{"use strict";t.exports=Error},577211,(e,t,r)=>{"use strict";t.exports=EvalError},436638,(e,t,r)=>{"use strict";t.exports=RangeError},954152,(e,t,r)=>{"use strict";t.exports=ReferenceError},595757,(e,t,r)=>{"use strict";t.exports=SyntaxError},262387,(e,t,r)=>{"use strict";t.exports=TypeError},102570,(e,t,r)=>{"use strict";t.exports=URIError},759048,(e,t,r)=>{"use strict";t.exports=Math.abs},794959,(e,t,r)=>{"use strict";t.exports=Math.floor},128011,(e,t,r)=>{"use strict";t.exports=Math.max},399078,(e,t,r)=>{"use strict";t.exports=Math.min},501976,(e,t,r)=>{"use strict";t.exports=Math.pow},716805,(e,t,r)=>{"use strict";t.exports=Math.round},511984,(e,t,r)=>{"use strict";t.exports=Number.isNaN||function(e){return e!=e}},101862,(e,t,r)=>{"use strict";var n=e.r(511984);t.exports=function(e){return n(e)||0===e?e:e<0?-1:1}},430764,(e,t,r)=>{"use strict";t.exports=Object.getOwnPropertyDescriptor},714038,(e,t,r)=>{"use strict";var n=e.r(430764);if(n)try{n([],"length")}catch(e){n=null}t.exports=n},942654,(e,t,r)=>{"use strict";var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch(e){n=!1}t.exports=n},435837,(e,t,r)=>{"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var n in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var o=Object.getOwnPropertySymbols(e);if(1!==o.length||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},43265,(e,t,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=e.r(435837);t.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&o()}},705349,(e,t,r)=>{"use strict";t.exports="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null},354153,(e,t,r)=>{"use strict";t.exports=e.r(750997).getPrototypeOf||null},635117,(e,t,r)=>{"use strict";var n=Object.prototype.toString,o=Math.max,i=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var o=0;o<t.length;o+=1)r[o+e.length]=t[o];return r},s=function(e,t){for(var r=[],n=t||0,o=0;n<e.length;n+=1,o+=1)r[o]=e[n];return r},a=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r};t.exports=function(e){var t,r=this;if("function"!=typeof r||"[object Function]"!==n.apply(r))throw TypeError("Function.prototype.bind called on incompatible "+r);for(var l=s(arguments,1),u=o(0,r.length-l.length),c=[],p=0;p<u;p++)c[p]="$"+p;if(t=Function("binder","return function ("+a(c,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof t){var n=r.apply(this,i(l,arguments));return Object(n)===n?n:this}return r.apply(e,i(l,arguments))}),r.prototype){var d=function(){};d.prototype=r.prototype,t.prototype=new d,d.prototype=null}return t}},181153,(e,t,r)=>{"use strict";var n=e.r(635117);t.exports=Function.prototype.bind||n},190694,(e,t,r)=>{"use strict";t.exports=Function.prototype.call},722552,(e,t,r)=>{"use strict";t.exports=Function.prototype.apply},132539,(e,t,r)=>{"use strict";t.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},983860,(e,t,r)=>{"use strict";var n=e.r(181153),o=e.r(722552),i=e.r(190694);t.exports=e.r(132539)||n.call(i,o)},427352,(e,t,r)=>{"use strict";var n=e.r(181153),o=e.r(262387),i=e.r(190694),s=e.r(983860);t.exports=function(e){if(e.length<1||"function"!=typeof e[0])throw new o("a function is required");return s(n,i,e)}},526036,(e,t,r)=>{"use strict";var n,o=e.r(427352),i=e.r(714038);try{n=[].__proto__===Array.prototype}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"ERR_PROTO_ACCESS"!==e.code)throw e}var s=!!n&&i&&i(Object.prototype,"__proto__"),a=Object,l=a.getPrototypeOf;t.exports=s&&"function"==typeof s.get?o([s.get]):"function"==typeof l&&function(e){return l(null==e?e:a(e))}},33728,(e,t,r)=>{"use strict";var n=e.r(705349),o=e.r(354153),i=e.r(526036);t.exports=n?function(e){return n(e)}:o?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw TypeError("getProto: not an object");return o(e)}:i?function(e){return i(e)}:null},672146,(e,t,r)=>{"use strict";var n=Function.prototype.call,o=Object.prototype.hasOwnProperty;t.exports=e.r(181153).call(n,o)},872138,(e,t,r)=>{"use strict";var n=e.r(750997),o=e.r(772135),i=e.r(577211),s=e.r(436638),a=e.r(954152),l=e.r(595757),u=e.r(262387),c=e.r(102570),p=e.r(759048),d=e.r(794959),f=e.r(128011),h=e.r(399078),m=e.r(501976),y=e.r(716805),g=e.r(101862),b=Function,_=function(e){try{return b('"use strict"; return ('+e+").constructor;")()}catch(e){}},v=e.r(714038),E=e.r(942654),w=function(){throw new u},R=v?function(){try{return arguments.callee,w}catch(e){try{return v(arguments,"callee").get}catch(e){return w}}}():w,T=e.r(43265)(),S=e.r(33728),A=e.r(354153),x=e.r(705349),O=e.r(722552),C=e.r(190694),k={},I="undefined"!=typeof Uint8Array&&S?S(Uint8Array):void 0,P={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":T&&S?S([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":k,"%AsyncGenerator%":k,"%AsyncGeneratorFunction%":k,"%AsyncIteratorPrototype%":k,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?void 0:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?void 0:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o,"%eval%":eval,"%EvalError%":i,"%Float16Array%":"undefined"==typeof Float16Array?void 0:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":b,"%GeneratorFunction%":k,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":T&&S?S(S([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&T&&S?S(new Map()[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":n,"%Object.getOwnPropertyDescriptor%":v,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":s,"%ReferenceError%":a,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&T&&S?S(new Set()[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":T&&S?S(""[Symbol.iterator]()):void 0,"%Symbol%":T?Symbol:void 0,"%SyntaxError%":l,"%ThrowTypeError%":R,"%TypedArray%":I,"%TypeError%":u,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":c,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%Function.prototype.call%":C,"%Function.prototype.apply%":O,"%Object.defineProperty%":E,"%Object.getPrototypeOf%":A,"%Math.abs%":p,"%Math.floor%":d,"%Math.max%":f,"%Math.min%":h,"%Math.pow%":m,"%Math.round%":y,"%Math.sign%":g,"%Reflect.getPrototypeOf%":x};if(S)try{null.error}catch(e){var N=S(S(e));P["%Error.prototype%"]=N}var F=function e(t){var r;if("%AsyncFunction%"===t)r=_("async function () {}");else if("%GeneratorFunction%"===t)r=_("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=_("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&S&&(r=S(o.prototype))}return P[t]=r,r},L={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},j=e.r(181153),z=e.r(672146),D=j.call(C,Array.prototype.concat),U=j.call(O,Array.prototype.splice),M=j.call(C,String.prototype.replace),B=j.call(C,String.prototype.slice),$=j.call(C,RegExp.prototype.exec),q=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,H=/\\(\\)?/g,V=function(e){var t=B(e,0,1),r=B(e,-1);if("%"===t&&"%"!==r)throw new l("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new l("invalid intrinsic syntax, expected opening `%`");var n=[];return M(e,q,function(e,t,r,o){n[n.length]=r?M(o,H,"$1"):t||e}),n},G=function(e,t){var r,n=e;if(z(L,n)&&(n="%"+(r=L[n])[0]+"%"),z(P,n)){var o=P[n];if(o===k&&(o=F(n)),void 0===o&&!t)throw new u("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new l("intrinsic "+e+" does not exist!")};t.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new u('"allowMissing" argument must be a boolean');if(null===$(/^%?[^%]*%?$/,e))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=V(e),n=r.length>0?r[0]:"",o=G("%"+n+"%",t),i=o.name,s=o.value,a=!1,c=o.alias;c&&(n=c[0],U(r,D([0,1],c)));for(var p=1,d=!0;p<r.length;p+=1){var f=r[p],h=B(f,0,1),m=B(f,-1);if(('"'===h||"'"===h||"`"===h||'"'===m||"'"===m||"`"===m)&&h!==m)throw new l("property names with quotes must have matching quotes");if("constructor"!==f&&d||(a=!0),n+="."+f,z(P,i="%"+n+"%"))s=P[i];else if(null!=s){if(!(f in s)){if(!t)throw new u("base intrinsic for "+e+" exists, but the property is not available.");return}if(v&&p+1>=r.length){var y=v(s,f);s=(d=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:s[f]}else d=z(s,f),s=s[f];d&&!a&&(P[i]=s)}}return s}},182458,(e,t,r)=>{"use strict";var n=e.r(435837);t.exports=function(){return n()&&!!Symbol.toStringTag}},526163,(e,t,r)=>{"use strict";var n=e.r(872138)("%Object.defineProperty%",!0),o=e.r(182458)(),i=e.r(672146),s=e.r(262387),a=o?Symbol.toStringTag:null;t.exports=function(e,t){var r=arguments.length>2&&!!arguments[2]&&arguments[2].force,o=arguments.length>2&&!!arguments[2]&&arguments[2].nonConfigurable;if(void 0!==r&&"boolean"!=typeof r||void 0!==o&&"boolean"!=typeof o)throw new s("if provided, the `overrideIfSet` and `nonConfigurable` options must be booleans");a&&(r||!i(e,a))&&(n?n(e,a,{configurable:!o,enumerable:!1,value:t,writable:!1}):e[a]=t)}},792172,(e,t,r)=>{"use strict";t.exports=function(e,t){return Object.keys(t).forEach(function(r){e[r]=e[r]||t[r]}),e}},799433,(e,t,r)=>{"use strict";var n=e.r(474973),o=e.r(224361),i=e.r(814747),s=e.r(921517),a=e.r(524836),l=e.r(792509).parse,u=e.r(522734),c=e.r(688947).Stream,p=e.r(254799),d=e.r(772388),f=e.r(384918),h=e.r(526163),m=e.r(672146),y=e.r(792172);function g(e){if(!(this instanceof g))return new g(e);for(var t in this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],n.call(this),e=e||{})this[t]=e[t]}o.inherits(g,n),g.LINE_BREAK="\r\n",g.DEFAULT_CONTENT_TYPE="application/octet-stream",g.prototype.append=function(e,t,r){"string"==typeof(r=r||{})&&(r={filename:r});var o=n.prototype.append.bind(this);if(("number"==typeof t||null==t)&&(t=String(t)),Array.isArray(t))return void this._error(Error("Arrays are not supported."));var i=this._multiPartHeader(e,t,r),s=this._multiPartFooter();o(i),o(t),o(s),this._trackLength(i,t,r)},g.prototype._trackLength=function(e,t,r){var n=0;null!=r.knownLength?n+=Number(r.knownLength):Buffer.isBuffer(t)?n=t.length:"string"==typeof t&&(n=Buffer.byteLength(t)),this._valueLength+=n,this._overheadLength+=Buffer.byteLength(e)+g.LINE_BREAK.length,t&&(t.path||t.readable&&m(t,"httpVersion")||t instanceof c)&&(r.knownLength||this._valuesToMeasure.push(t))},g.prototype._lengthRetriever=function(e,t){m(e,"fd")?void 0!=e.end&&e.end!=1/0&&void 0!=e.start?t(null,e.end+1-(e.start?e.start:0)):u.stat(e.path,function(r,n){r?t(r):t(null,n.size-(e.start?e.start:0))}):m(e,"httpVersion")?t(null,Number(e.headers["content-length"])):m(e,"httpModule")?(e.on("response",function(r){e.pause(),t(null,Number(r.headers["content-length"]))}),e.resume()):t("Unknown stream")},g.prototype._multiPartHeader=function(e,t,r){if("string"==typeof r.header)return r.header;var n,o=this._getContentDisposition(t,r),i=this._getContentType(t,r),s="",a={"Content-Disposition":["form-data",'name="'+e+'"'].concat(o||[]),"Content-Type":[].concat(i||[])};for(var l in"object"==typeof r.header&&y(a,r.header),a)if(m(a,l)){if(null==(n=a[l]))continue;Array.isArray(n)||(n=[n]),n.length&&(s+=l+": "+n.join("; ")+g.LINE_BREAK)}return"--"+this.getBoundary()+g.LINE_BREAK+s+g.LINE_BREAK},g.prototype._getContentDisposition=function(e,t){var r;if("string"==typeof t.filepath?r=i.normalize(t.filepath).replace(/\\/g,"/"):t.filename||e&&(e.name||e.path)?r=i.basename(t.filename||e&&(e.name||e.path)):e&&e.readable&&m(e,"httpVersion")&&(r=i.basename(e.client._httpMessage.path||"")),r)return'filename="'+r+'"'},g.prototype._getContentType=function(e,t){var r=t.contentType;return!r&&e&&e.name&&(r=d.lookup(e.name)),!r&&e&&e.path&&(r=d.lookup(e.path)),!r&&e&&e.readable&&m(e,"httpVersion")&&(r=e.headers["content-type"]),!r&&(t.filepath||t.filename)&&(r=d.lookup(t.filepath||t.filename)),!r&&e&&"object"==typeof e&&(r=g.DEFAULT_CONTENT_TYPE),r},g.prototype._multiPartFooter=function(){return(function(e){var t=g.LINE_BREAK;0===this._streams.length&&(t+=this._lastBoundary()),e(t)}).bind(this)},g.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+g.LINE_BREAK},g.prototype.getHeaders=function(e){var t,r={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(t in e)m(e,t)&&(r[t.toLowerCase()]=e[t]);return r},g.prototype.setBoundary=function(e){if("string"!=typeof e)throw TypeError("FormData boundary must be a string");this._boundary=e},g.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary},g.prototype.getBuffer=function(){for(var e=new Buffer.alloc(0),t=this.getBoundary(),r=0,n=this._streams.length;r<n;r++)"function"!=typeof this._streams[r]&&(e=Buffer.isBuffer(this._streams[r])?Buffer.concat([e,this._streams[r]]):Buffer.concat([e,Buffer.from(this._streams[r])]),("string"!=typeof this._streams[r]||this._streams[r].substring(2,t.length+2)!==t)&&(e=Buffer.concat([e,Buffer.from(g.LINE_BREAK)])));return Buffer.concat([e,Buffer.from(this._lastBoundary())])},g.prototype._generateBoundary=function(){this._boundary="--------------------------"+p.randomBytes(12).toString("hex")},g.prototype.getLengthSync=function(){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this.hasKnownLength()||this._error(Error("Cannot calculate proper length in synchronous way.")),e},g.prototype.hasKnownLength=function(){var e=!0;return this._valuesToMeasure.length&&(e=!1),e},g.prototype.getLength=function(e){var t=this._overheadLength+this._valueLength;(this._streams.length&&(t+=this._lastBoundary().length),this._valuesToMeasure.length)?f.parallel(this._valuesToMeasure,this._lengthRetriever,function(r,n){r?e(r):(n.forEach(function(e){t+=e}),e(null,t))}):process.nextTick(e.bind(this,null,t))},g.prototype.submit=function(e,t){var r,n,o={method:"post"};return"string"==typeof e?n=y({port:(e=l(e)).port,path:e.pathname,host:e.hostname,protocol:e.protocol},o):(n=y(e,o)).port||(n.port="https:"===n.protocol?443:80),n.headers=this.getHeaders(e.headers),r="https:"===n.protocol?a.request(n):s.request(n),this.getLength((function(e,n){if(e&&"Unknown stream"!==e)return void this._error(e);if(n&&r.setHeader("Content-Length",n),this.pipe(r),t){var o,i=function(e,n){return r.removeListener("error",i),r.removeListener("response",o),t.call(this,e,n)};o=i.bind(this,null),r.on("error",i),r.on("response",o)}}).bind(this)),r},g.prototype._error=function(e){this.error||(this.error=e,this.pause(),this.emit("error",e))},g.prototype.toString=function(){return"[object FormData]"},h(g,"FormData"),t.exports=g},859938,(e,t,r)=>{"use strict";var n=e.r(792509).parse,o={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},i=String.prototype.endsWith||function(e){return e.length<=this.length&&-1!==this.indexOf(e,this.length-e.length)};function s(e){return process.env[e.toLowerCase()]||process.env[e.toUpperCase()]||""}r.getProxyForUrl=function(e){var t,r,a,l="string"==typeof e?n(e):e||{},u=l.protocol,c=l.host,p=l.port;if("string"!=typeof c||!c||"string"!=typeof u)return"";if(u=u.split(":",1)[0],t=c=c.replace(/:\d*$/,""),r=p=parseInt(p)||o[u]||0,!(!(a=(s("npm_config_no_proxy")||s("no_proxy")).toLowerCase())||"*"!==a&&a.split(/[,\s]/).every(function(e){if(!e)return!0;var n=e.match(/^(.+):(\d+)$/),o=n?n[1]:e,s=n?parseInt(n[2]):0;return!!s&&s!==r||(/^[.*]/.test(o)?("*"===o.charAt(0)&&(o=o.slice(1)),!i.call(t,o)):t!==o)})))return"";var d=s("npm_config_"+u+"_proxy")||s(u+"_proxy")||s("npm_config_proxy")||s("all_proxy");return d&&-1===d.indexOf("://")&&(d=u+"://"+d),d}},141528,(e,t,r)=>{function n(e,t,r,n){return Math.round(e/r)+" "+n+(t>=1.5*r?"s":"")}t.exports=function(e,t){t=t||{};var r,o,i,s,a=typeof e;if("string"===a&&e.length>0){var l=e;if(!((l=String(l)).length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(u){var c=parseFloat(u[1]);switch((u[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*c;case"weeks":case"week":case"w":return 6048e5*c;case"days":case"day":case"d":return 864e5*c;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*c;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*c;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*c;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:break}}}return}if("number"===a&&isFinite(e)){return t.long?(o=Math.abs(r=e))>=864e5?n(r,o,864e5,"day"):o>=36e5?n(r,o,36e5,"hour"):o>=6e4?n(r,o,6e4,"minute"):o>=1e3?n(r,o,1e3,"second"):r+" ms":(s=Math.abs(i=e))>=864e5?Math.round(i/864e5)+"d":s>=36e5?Math.round(i/36e5)+"h":s>=6e4?Math.round(i/6e4)+"m":s>=1e3?Math.round(i/1e3)+"s":i+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},916525,(e,t,r)=>{t.exports=function(t){function r(e){let t,o,i,s=null;function a(...e){if(!a.enabled)return;let n=Number(new Date);a.diff=n-(t||n),a.prev=t,a.curr=n,t=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(t,n)=>{if("%%"===t)return"%";o++;let i=r.formatters[n];if("function"==typeof i){let r=e[o];t=i.call(a,r),e.splice(o,1),o--}return t}),r.formatArgs.call(a,e),(a.log||r.log).apply(a,e)}return a.namespace=e,a.useColors=r.useColors(),a.color=r.selectColor(e),a.extend=n,a.destroy=r.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(o!==r.namespaces&&(o=r.namespaces,i=r.enabled(e)),i),set:e=>{s=e}}),"function"==typeof r.init&&r.init(a),a}function n(e,t){let n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e,t){let r=0,n=0,o=-1,i=0;for(;r<e.length;)if(n<t.length&&(t[n]===e[r]||"*"===t[n]))"*"===t[n]?(o=n,i=r):r++,n++;else{if(-1===o)return!1;n=o+1,r=++i}for(;n<t.length&&"*"===t[n];)n++;return n===t.length}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){let e=[...r.names,...r.skips.map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){for(let t of(r.save(e),r.namespaces=e,r.names=[],r.skips=[],("string"==typeof e?e:"").trim().replace(/\s+/g,",").split(",").filter(Boolean)))"-"===t[0]?r.skips.push(t.slice(1)):r.names.push(t)},r.enabled=function(e){for(let t of r.skips)if(o(e,t))return!1;for(let t of r.names)if(o(e,t))return!0;return!1},r.humanize=e.r(141528),r.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(e=>{r[e]=t[e]}),r.names=[],r.skips=[],r.formatters={},r.selectColor=function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return r.colors[Math.abs(t)%r.colors.length]},r.enable(r.load()),r}},523440,(e,t,r)=>{let n=e.r(870722),o=e.r(224361);r.init=function(e){e.inspectOpts={};let t=Object.keys(r.inspectOpts);for(let n=0;n<t.length;n++)e.inspectOpts[t[n]]=r.inspectOpts[t[n]]},r.log=function(...e){return process.stderr.write(o.formatWithOptions(r.inspectOpts,...e)+"\n")},r.formatArgs=function(e){let{namespace:n,useColors:o}=this;if(o){let r=this.color,o="\x1b[3"+(r<8?r:"8;5;"+r),i=`  ${o};1m${n} \u001B[0m`;e[0]=i+e[0].split("\n").join("\n"+i),e.push(o+"m+"+t.exports.humanize(this.diff)+"\x1b[0m")}else e[0]=(r.inspectOpts.hideDate?"":new Date().toISOString()+" ")+n+" "+e[0]},r.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},r.load=function(){return process.env.DEBUG},r.useColors=function(){return"colors"in r.inspectOpts?!!r.inspectOpts.colors:n.isatty(process.stderr.fd)},r.destroy=o.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),r.colors=[6,2,3,4,5,1];try{let e=(()=>{let e=Error("Cannot find module 'supports-color'");throw e.code="MODULE_NOT_FOUND",e})();e&&(e.stderr||e).level>=2&&(r.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}r.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase()),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),t.exports=e.r(916525)(r);let{formatters:i}=t.exports;i.o=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},i.O=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts)}},328452,(e,t,r)=>{let n;r.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let n=0,o=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(o=n))}),e.splice(o,0,r)},r.save=function(e){try{e?r.storage.setItem("debug",e):r.storage.removeItem("debug")}catch(e){}},r.load=function(){let e;try{e=r.storage.getItem("debug")||r.storage.getItem("DEBUG")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},r.useColors=function(){let e;return!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},r.storage=function(){try{return localStorage}catch(e){}}(),n=!1,r.destroy=()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))},r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],r.log=console.debug||console.log||(()=>{}),t.exports=e.r(916525)(r);let{formatters:o}=t.exports;o.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},817293,(e,t,r)=>{"undefined"==typeof process||"renderer"===process.type||process.__nwjs?t.exports=e.r(328452):t.exports=e.r(523440)},806702,(e,t,r)=>{var n;t.exports=function(){if(!n){try{n=e.r(817293)("follow-redirects")}catch(e){}"function"!=typeof n&&(n=function(){})}n.apply(null,arguments)}},210894,(e,t,r)=>{var n,o,i=e.r(792509),s=i.URL,a=e.r(921517),l=e.r(524836),u=e.r(688947).Writable,c=e.r(449719),p=e.r(806702);n="undefined"!=typeof process,o=P(Error.captureStackTrace),n||o||console.warn("The follow-redirects package should be excluded from browser builds.");var d=!1;try{c(new s(""))}catch(e){d="ERR_INVALID_URL"===e.code}var f=["auth","host","hostname","href","path","pathname","port","protocol","query","search","hash"],h=["abort","aborted","connect","error","socket","timeout"],m=Object.create(null);h.forEach(function(e){m[e]=function(t,r,n){this._redirectable.emit(e,t,r,n)}});var y=C("ERR_INVALID_URL","Invalid URL",TypeError),g=C("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),b=C("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",g),_=C("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),v=C("ERR_STREAM_WRITE_AFTER_END","write after end"),E=u.prototype.destroy||T;function w(e,t){u.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var r=this;this._onNativeResponse=function(e){try{r._processResponse(e)}catch(e){r.emit("error",e instanceof g?e:new g({cause:e}))}},this._performRequest()}function R(e){var t={maxRedirects:21,maxBodyLength:0xa00000},r={};return Object.keys(e).forEach(function(n){var o=n+":",i=r[o]=e[n],a=t[n]=Object.create(i);Object.defineProperties(a,{request:{value:function(e,n,i){var a;return(a=e,s&&a instanceof s)?e=x(e):I(e)?e=x(S(e)):(i=n,n=A(e),e={protocol:o}),P(n)&&(i=n,n=null),(n=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e,n)).nativeProtocols=r,I(n.host)||I(n.hostname)||(n.hostname="::1"),c.equal(n.protocol,o,"protocol mismatch"),p("options",n),new w(n,i)},configurable:!0,enumerable:!0,writable:!0},get:{value:function(e,t,r){var n=a.request(e,t,r);return n.end(),n},configurable:!0,enumerable:!0,writable:!0}})}),t}function T(){}function S(e){var t;if(d)t=new s(e);else if(!I((t=A(i.parse(e))).protocol))throw new y({input:e});return t}function A(e){if(/^\[/.test(e.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(e.hostname)||/^\[/.test(e.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(e.host))throw new y({input:e.href||e});return e}function x(e,t){var r=t||{};for(var n of f)r[n]=e[n];return r.hostname.startsWith("[")&&(r.hostname=r.hostname.slice(1,-1)),""!==r.port&&(r.port=Number(r.port)),r.path=r.search?r.pathname+r.search:r.pathname,r}function O(e,t){var r;for(var n in t)e.test(n)&&(r=t[n],delete t[n]);return null==r?void 0:String(r).trim()}function C(e,t,r){function n(r){P(Error.captureStackTrace)&&Error.captureStackTrace(this,this.constructor),Object.assign(this,r||{}),this.code=e,this.message=this.cause?t+": "+this.cause.message:t}return n.prototype=new(r||Error),Object.defineProperties(n.prototype,{constructor:{value:n,enumerable:!1},name:{value:"Error ["+e+"]",enumerable:!1}}),n}function k(e,t){for(var r of h)e.removeListener(r,m[r]);e.on("error",T),e.destroy(t)}function I(e){return"string"==typeof e||e instanceof String}function P(e){return"function"==typeof e}w.prototype=Object.create(u.prototype),w.prototype.abort=function(){k(this._currentRequest),this._currentRequest.abort(),this.emit("abort")},w.prototype.destroy=function(e){return k(this._currentRequest,e),E.call(this,e),this},w.prototype.write=function(e,t,r){var n;if(this._ending)throw new v;if(!I(e)&&!("object"==typeof(n=e)&&"length"in n))throw TypeError("data should be a string, Buffer or Uint8Array");if(P(t)&&(r=t,t=null),0===e.length){r&&r();return}this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,r)):(this.emit("error",new _),this.abort())},w.prototype.end=function(e,t,r){if(P(e)?(r=e,e=t=null):P(t)&&(r=t,t=null),e){var n=this,o=this._currentRequest;this.write(e,t,function(){n._ended=!0,o.end(null,null,r)}),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,r)},w.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},w.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},w.prototype.setTimeout=function(e,t){var r=this;function n(t){t.setTimeout(e),t.removeListener("timeout",t.destroy),t.addListener("timeout",t.destroy)}function o(t){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),i()},e),n(t)}function i(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",i),r.removeListener("error",i),r.removeListener("response",i),r.removeListener("close",i),t&&r.removeListener("timeout",t),r.socket||r._currentRequest.removeListener("socket",o)}return t&&this.on("timeout",t),this.socket?o(this.socket):this._currentRequest.once("socket",o),this.on("socket",n),this.on("abort",i),this.on("error",i),this.on("response",i),this.on("close",i),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(e){w.prototype[e]=function(t,r){return this._currentRequest[e](t,r)}}),["aborted","connection","socket"].forEach(function(e){Object.defineProperty(w.prototype,e,{get:function(){return this._currentRequest[e]}})}),w.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}},w.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(!t)throw TypeError("Unsupported protocol "+e);if(this._options.agents){var r=e.slice(0,-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=t.request(this._options,this._onNativeResponse);for(var o of(n._redirectable=this,h))n.on(o,m[o]);if(this._currentUrl=/^\//.test(this._options.path)?i.format(this._options):this._options.path,this._isRedirect){var s=0,a=this,l=this._requestBodyBuffers;!function e(t){if(n===a._currentRequest)if(t)a.emit("error",t);else if(s<l.length){var r=l[s++];n.finished||n.write(r.data,r.encoding,e)}else a._ended&&n.end()}()}},w.prototype._processResponse=function(e){var t,r,n,o,a,l,u=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:u});var f=e.headers.location;if(!f||!1===this._options.followRedirects||u<300||u>=400){e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),this._requestBodyBuffers=[];return}if(k(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects)throw new b;var h=this._options.beforeRedirect;h&&(l=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var m=this._options.method;(301!==u&&302!==u||"POST"!==this._options.method)&&(303!==u||/^(?:GET|HEAD)$/.test(this._options.method))||(this._options.method="GET",this._requestBodyBuffers=[],O(/^content-/i,this._options.headers));var y=O(/^host$/i,this._options.headers),g=S(this._currentUrl),_=y||g.host,v=/^\w+:/.test(f)?this._currentUrl:i.format(Object.assign(g,{host:_})),E=(t=f,r=v,d?new s(t,r):S(i.resolve(r,t)));if(p("redirecting to",E.href),this._isRedirect=!0,x(E,this._options),(E.protocol===g.protocol||"https:"===E.protocol)&&(E.host===_||(n=E.host,o=_,c(I(n)&&I(o)),(a=n.length-o.length-1)>0&&"."===n[a]&&n.endsWith(o)))||O(/^(?:(?:proxy-)?authorization|cookie)$/i,this._options.headers),P(h)){var w={headers:e.headers,statusCode:u},R={url:v,method:m,headers:l};h(this._options,w,R),this._sanitizeOptions(this._options)}this._performRequest()},t.exports=R({http:a,https:l}),t.exports.wrap=R},92346,e=>{"use strict";let t,r,n,o;var i,s,a,l,u,c,p,d,f,h,m,y,g,b,_,v=e.i(747909),E=e.i(174017),w=e.i(996250),R=e.i(759756),T=e.i(561916),S=e.i(114444),A=e.i(837092),x=e.i(869741),O=e.i(316795),C=e.i(487718),k=e.i(995169),I=e.i(47587),P=e.i(666012),N=e.i(570101),F=e.i(626937),L=e.i(10372),j=e.i(193695);e.i(52474);var z=e.i(600220),D=e.i(89171);e.i(274444);var U=e.i(410584),M=Object.defineProperty,B=Object.defineProperties,$=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,G=(e,t,r)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,K=(e,t)=>{for(var r in t||(t={}))H.call(t,r)&&G(e,r,t[r]);if(q)for(var r of q(t))V.call(t,r)&&G(e,r,t[r]);return e},W="vercel.ai.error",Y=Symbol.for(W),J=class e extends Error{constructor({name:e,message:t,cause:r}){super(t),this[c]=!0,this.name=e,this.cause=r}static isInstance(t){return e.hasMarker(t,W)}static hasMarker(e,t){let r=Symbol.for(t);return null!=e&&"object"==typeof e&&r in e&&"boolean"==typeof e[r]&&!0===e[r]}};c=Y;var X=J,Q="AI_APICallError",Z=`vercel.ai.error.${Q}`,ee=Symbol.for(Z),et=class extends X{constructor({message:e,url:t,requestBodyValues:r,statusCode:n,responseHeaders:o,responseBody:i,cause:s,isRetryable:a=null!=n&&(408===n||409===n||429===n||n>=500),data:l}){super({name:Q,message:e,cause:s}),this[p]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=o,this.responseBody=i,this.isRetryable=a,this.data=l}static isInstance(e){return X.hasMarker(e,Z)}};p=ee;var er="AI_EmptyResponseBodyError",en=`vercel.ai.error.${er}`,eo=Symbol.for(en),ei=class extends X{constructor({message:e="Empty response body"}={}){super({name:er,message:e}),this[d]=!0}static isInstance(e){return X.hasMarker(e,en)}};function es(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}d=eo;var ea="AI_InvalidArgumentError",el=`vercel.ai.error.${ea}`,eu=Symbol.for(el),ec=class extends X{constructor({message:e,cause:t,argument:r}){super({name:ea,message:e,cause:t}),this[f]=!0,this.argument=r}static isInstance(e){return X.hasMarker(e,el)}};f=eu;var ep="AI_InvalidPromptError",ed=`vercel.ai.error.${ep}`,ef=Symbol.for(ed),eh=class extends X{constructor({prompt:e,message:t,cause:r}){super({name:ep,message:`Invalid prompt: ${t}`,cause:r}),this[h]=!0,this.prompt=e}static isInstance(e){return X.hasMarker(e,ed)}};h=ef;var em="AI_InvalidResponseDataError",ey=`vercel.ai.error.${em}`,eg=Symbol.for(ey),eb=class extends X{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:em,message:t}),this[m]=!0,this.data=e}static isInstance(e){return X.hasMarker(e,ey)}};m=eg;var e_="AI_JSONParseError",ev=`vercel.ai.error.${e_}`,eE=Symbol.for(ev),ew=class extends X{constructor({text:e,cause:t}){super({name:e_,message:`JSON parsing failed: Text: ${e}.
Error message: ${es(t)}`,cause:t}),this[y]=!0,this.text=e}static isInstance(e){return X.hasMarker(e,ev)}};y=eE;var eR="AI_LoadAPIKeyError",eT=`vercel.ai.error.${eR}`,eS=Symbol.for(eT),eA=class extends X{constructor({message:e}){super({name:eR,message:e}),this[g]=!0}static isInstance(e){return X.hasMarker(e,eT)}};g=eS,Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError"),Symbol.for("vercel.ai.error.AI_NoSuchModelError"),Symbol.for("vercel.ai.error.AI_TooManyEmbeddingValuesForCallError");var ex="AI_TypeValidationError",eO=`vercel.ai.error.${ex}`,eC=Symbol.for(eO),ek=class e extends X{constructor({value:e,cause:t}){super({name:ex,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${es(t)}`,cause:t}),this[b]=!0,this.value=e}static isInstance(e){return X.hasMarker(e,eO)}static wrap({value:t,cause:r}){return e.isInstance(r)&&r.value===t?r:new e({value:t,cause:r})}};b=eC;var eI="AI_UnsupportedFunctionalityError",eP=`vercel.ai.error.${eI}`,eN=Symbol.for(eP),eF=class extends X{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:eI,message:t}),this[_]=!0,this.functionality=e}static isInstance(e){return X.hasMarker(e,eP)}};_=eN;var eL=class extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}};function ej(e){}var ez=class extends TransformStream{constructor({onError:e,onRetry:t,onComment:r}={}){let n;super({start(o){n=function(e){if("function"==typeof e)throw TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:t=ej,onError:r=ej,onRetry:n=ej,onComment:o}=e,i="",s=!0,a,l="",u="";function c(e){if(""===e)return void(l.length>0&&t({id:a,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),a=void 0,l="",u="");if(e.startsWith(":")){o&&o(e.slice(e.startsWith(": ")?2:1));return}let r=e.indexOf(":");if(-1!==r){let t=e.slice(0,r),n=" "===e[r+1]?2:1;p(t,e.slice(r+n),e);return}p(e,"",e)}function p(e,t,o){switch(e){case"event":u=t;break;case"data":l=`${l}${t}
`;break;case"id":a=t.includes("\0")?void 0:t;break;case"retry":/^\d+$/.test(t)?n(parseInt(t,10)):r(new eL(`Invalid \`retry\` value: "${t}"`,{type:"invalid-retry",value:t,line:o}));break;default:r(new eL(`Unknown field "${e.length>20?`${e.slice(0,20)}\u2026`:e}"`,{type:"unknown-field",field:e,value:t,line:o}))}}return{feed:function(e){let t=s?e.replace(/^\xEF\xBB\xBF/,""):e,[r,n]=function(e){let t=[],r="",n=0;for(;n<e.length;){let o=e.indexOf("\r",n),i=e.indexOf(`
`,n),s=-1;if(-1!==o&&-1!==i?s=Math.min(o,i):-1!==o?s=o:-1!==i&&(s=i),-1===s){r=e.slice(n);break}{let r=e.slice(n,s);t.push(r),"\r"===e[(n=s+1)-1]&&e[n]===`
`&&n++}}return[t,r]}(`${i}${t}`);for(let e of r)c(e);i=n,s=!1},reset:function(e={}){i&&e.consume&&c(i),s=!0,a=void 0,l="",u="",i=""}}}({onEvent:e=>{o.enqueue(e)},onError(t){"terminate"===e?o.error(t):"function"==typeof e&&e(t)},onRetry:t,onComment:r})},transform(e){n.feed(e)}})}};function eD(...e){return e.reduce((e,t)=>K(K({},e),null!=t?t:{}),{})}function eU(e){return Object.fromEntries([...e.headers])}Symbol("Let zodToJsonSchema decide on which parser to use");var eM=(({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{let o=()=>{let e=r.length,n=Array(t);for(let o=0;o<t;o++)n[o]=r[Math.random()*e|0];return n.join("")};if(null==e)return o;if(r.includes(n))throw new ec({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return()=>`${e}${n}${o()}`})();function eB(e){return(e instanceof Error||e instanceof DOMException)&&("AbortError"===e.name||"ResponseAborted"===e.name||"TimeoutError"===e.name)}var e$=["fetch failed","failed to fetch"],eq=/"__proto__"\s*:/,eH=/"constructor"\s*:/;function eV(e){let{stackTraceLimit:t}=Error;Error.stackTraceLimit=0;try{let t;return t=JSON.parse(e),null===t||"object"!=typeof t||!1===eq.test(e)&&!1===eH.test(e)?t:function(e){let t=[e];for(;t.length;){let e=t;for(let r of(t=[],e)){if(Object.prototype.hasOwnProperty.call(r,"__proto__")||Object.prototype.hasOwnProperty.call(r,"constructor")&&Object.prototype.hasOwnProperty.call(r.constructor,"prototype"))throw SyntaxError("Object contains forbidden prototype property");for(let e in r){let n=r[e];n&&"object"==typeof n&&t.push(n)}}}return e}(t)}finally{Error.stackTraceLimit=t}}var eG=Symbol.for("vercel.ai.validator");async function eK({value:e,schema:t}){let r=await eW({value:e,schema:t});if(!r.success)throw ek.wrap({value:e,cause:r.error});return r.value}async function eW({value:e,schema:t}){var r;let n="object"==typeof t&&null!==t&&eG in t&&!0===t[eG]&&"validate"in t?t:(r=t,{[eG]:!0,validate:async e=>{let t=await r["~standard"].validate(e);return null==t.issues?{success:!0,value:t.value}:{success:!1,error:new ek({value:e,cause:t.issues})}}});try{if(null==n.validate)return{success:!0,value:e,rawValue:e};let t=await n.validate(e);if(t.success)return{success:!0,value:t.value,rawValue:e};return{success:!1,error:ek.wrap({value:e,cause:t.error}),rawValue:e}}catch(t){return{success:!1,error:ek.wrap({value:e,cause:t}),rawValue:e}}}async function eY({text:e,schema:t}){try{let r=eV(e);if(null==t)return r;return eK({value:r,schema:t})}catch(t){if(ew.isInstance(t)||ek.isInstance(t))throw t;throw new ew({text:e,cause:t})}}async function eJ({text:e,schema:t}){try{let r=eV(e);if(null==t)return{success:!0,value:r,rawValue:r};return await eW({value:r,schema:t})}catch(t){return{success:!1,error:ew.isInstance(t)?t:new ew({text:e,cause:t}),rawValue:void 0}}}function eX(e){try{return eV(e),!0}catch(e){return!1}}var eQ=()=>globalThis.fetch,eZ=async({url:e,headers:t,body:r,failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:s})=>e0({url:e,headers:K({"Content-Type":"application/json"},t),body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:o,abortSignal:i,fetch:s}),e0=async({url:e,headers:t={},body:r,successfulResponseHandler:n,failedResponseHandler:o,abortSignal:i,fetch:s=eQ()})=>{try{let a=await s(e,{method:"POST",headers:Object.fromEntries(Object.entries(t).filter(([e,t])=>null!=t)),body:r.content,signal:i}),l=eU(a);if(!a.ok){let t;try{t=await o({response:a,url:e,requestBodyValues:r.values})}catch(t){if(eB(t)||et.isInstance(t))throw t;throw new et({message:"Failed to process error response",cause:t,statusCode:a.status,url:e,responseHeaders:l,requestBodyValues:r.values})}throw t.value}try{return await n({response:a,url:e,requestBodyValues:r.values})}catch(t){if(t instanceof Error&&(eB(t)||et.isInstance(t)))throw t;throw new et({message:"Failed to process successful response",cause:t,statusCode:a.status,url:e,responseHeaders:l,requestBodyValues:r.values})}}catch(t){throw function({error:e,url:t,requestBodyValues:r}){if(eB(e))return e;if(e instanceof TypeError&&e$.includes(e.message.toLowerCase())){let n=e.cause;if(null!=n)return new et({message:`Cannot connect to API: ${n.message}`,cause:n,url:t,requestBodyValues:r,isRetryable:!0})}return e}({error:t,url:e,requestBodyValues:r.values})}},e1=e=>async({response:t})=>{let r=eU(t);if(null==t.body)throw new ei({});return{responseHeaders:r,value:function({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new ez).pipeThrough(new TransformStream({async transform({data:e},r){"[DONE]"!==e&&r.enqueue(await eJ({text:e,schema:t}))}}))}({stream:t.body,schema:e})}},e2=e=>async({response:t,url:r,requestBodyValues:n})=>{let o=await t.text(),i=await eJ({text:o,schema:e}),s=eU(t);if(!i.success)throw new et({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:o,url:r,requestBodyValues:n});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}};Symbol.for("vercel.ai.schema");var{btoa:e3,atob:e4}=globalThis,e6=U.z.object({type:U.z.literal("reasoning.summary"),summary:U.z.string()}),e5=U.z.object({type:U.z.literal("reasoning.encrypted"),data:U.z.string()}),e9=U.z.object({type:U.z.literal("reasoning.text"),text:U.z.string().nullish(),signature:U.z.string().nullish()}),e7=U.z.union([e6,e5,e9]),e8=U.z.union([e7,U.z.unknown().transform(()=>null)]),te=U.z.array(e8).transform(e=>e.filter(e=>!!e)),tt=U.z.object({error:U.z.object({code:U.z.union([U.z.string(),U.z.number()]).nullable().optional().default(null),message:U.z.string(),type:U.z.string().nullable().optional().default(null),param:U.z.any().nullable().optional().default(null)})}),tr=(({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:n,url:o,requestBodyValues:i})=>{let s=await n.text(),a=eU(n);if(""===s.trim())return{responseHeaders:a,value:new et({message:n.statusText,url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:a,responseBody:s,isRetryable:null==r?void 0:r(n)})};try{let l=await eY({text:s,schema:e});return{responseHeaders:a,value:new et({message:t(l),url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:a,responseBody:s,data:l,isRetryable:null==r?void 0:r(n,l)})}}catch(e){return{responseHeaders:a,value:new et({message:n.statusText,url:o,requestBodyValues:i,statusCode:n.status,responseHeaders:a,responseBody:s,isRetryable:null==r?void 0:r(n)})}}})({errorSchema:tt,errorToMessage:e=>e.error.message});function tn(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}function to({url:e,protocols:t}){try{let r=new URL(e);return t.has(r.protocol)}catch(e){return!1}}function ti({part:e,defaultMediaType:t}){var r,n;if(e.data instanceof Uint8Array){let n=function(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return e3(t)}(e.data);return`data:${null!=(r=e.mediaType)?r:t};base64,${n}`}let o=e.data.toString();return to({url:o,protocols:new Set(["http:","https:"])})||o.startsWith("data:")?o:`data:${null!=(n=e.mediaType)?n:t};base64,${o}`}function ts(e,t){var r;let n=e.match(/^data:([^;]+)/);return n&&null!=(r=n[1])?r:t}function ta(e){let t=e.match(/^data:[^;]*;base64,(.+)$/);return t?t[1]:e}function tl(e){var t,r,n;let o=null==e?void 0:e.anthropic,i=null==e?void 0:e.openrouter;return null!=(n=null!=(r=null!=(t=null==i?void 0:i.cacheControl)?t:null==i?void 0:i.cache_control)?r:null==o?void 0:o.cacheControl)?n:null==o?void 0:o.cache_control}U.z.union([U.z.literal("auto"),U.z.literal("none"),U.z.literal("required"),U.z.object({type:U.z.literal("function"),function:U.z.object({name:U.z.string()})})]);var tu=U.z.object({type:U.z.literal("image_url"),image_url:U.z.object({url:U.z.string()})}),tc=U.z.union([tu,U.z.unknown().transform(()=>null)]),tp=U.z.array(tc).transform(e=>e.filter(e=>!!e)),td=U.z.object({id:U.z.string().optional(),model:U.z.string().optional(),provider:U.z.string().optional(),usage:U.z.object({prompt_tokens:U.z.number(),prompt_tokens_details:U.z.object({cached_tokens:U.z.number()}).nullish(),completion_tokens:U.z.number(),completion_tokens_details:U.z.object({reasoning_tokens:U.z.number()}).nullish(),total_tokens:U.z.number(),cost:U.z.number().optional(),cost_details:U.z.object({upstream_inference_cost:U.z.number().nullish()}).nullish()}).nullish()}),tf=td.extend({choices:U.z.array(U.z.object({message:U.z.object({role:U.z.literal("assistant"),content:U.z.string().nullable().optional(),reasoning:U.z.string().nullable().optional(),reasoning_details:te.nullish(),images:tp.nullish(),tool_calls:U.z.array(U.z.object({id:U.z.string().optional().nullable(),type:U.z.literal("function"),function:U.z.object({name:U.z.string(),arguments:U.z.string()})})).optional(),annotations:U.z.array(U.z.object({type:U.z.enum(["url_citation"]),url_citation:U.z.object({end_index:U.z.number(),start_index:U.z.number(),title:U.z.string(),url:U.z.string(),content:U.z.string().optional()})})).nullish()}),index:U.z.number().nullish(),logprobs:U.z.object({content:U.z.array(U.z.object({token:U.z.string(),logprob:U.z.number(),top_logprobs:U.z.array(U.z.object({token:U.z.string(),logprob:U.z.number()}))})).nullable()}).nullable().optional(),finish_reason:U.z.string().optional().nullable()}))}),th=U.z.union([td.extend({choices:U.z.array(U.z.object({delta:U.z.object({role:U.z.enum(["assistant"]).optional(),content:U.z.string().nullish(),reasoning:U.z.string().nullish().optional(),reasoning_details:te.nullish(),images:tp.nullish(),tool_calls:U.z.array(U.z.object({index:U.z.number().nullish(),id:U.z.string().nullish(),type:U.z.literal("function").optional(),function:U.z.object({name:U.z.string().nullish(),arguments:U.z.string().nullish()})})).nullish(),annotations:U.z.array(U.z.object({type:U.z.enum(["url_citation"]),url_citation:U.z.object({end_index:U.z.number(),start_index:U.z.number(),title:U.z.string(),url:U.z.string(),content:U.z.string().optional()})})).nullish()}).nullish(),logprobs:U.z.object({content:U.z.array(U.z.object({token:U.z.string(),logprob:U.z.number(),top_logprobs:U.z.array(U.z.object({token:U.z.string(),logprob:U.z.number()}))})).nullable()}).nullish(),finish_reason:U.z.string().nullable().optional(),index:U.z.number().nullish()}))}),tt]),tm=class{constructor(e,t,r){this.specificationVersion="v2",this.provider="openrouter",this.defaultObjectGenerationMode="tool",this.supportedUrls={"image/*":[/^data:image\/[a-zA-Z]+;base64,/,/^https?:\/\/.+\.(jpg|jpeg|png|gif|webp)$/i],"application/*":[/^data:application\//,/^https?:\/\/.+$/]},this.modelId=e,this.settings=t,this.config=r}getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:n,frequencyPenalty:o,presencePenalty:i,seed:s,stopSequences:a,responseFormat:l,topK:u,tools:c,toolChoice:p}){var d;let f=K(K({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:!0===this.settings.logprobs||"number"==typeof this.settings.logprobs||void 0,top_logprobs:"number"==typeof this.settings.logprobs?this.settings.logprobs:"boolean"==typeof this.settings.logprobs&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:t,temperature:r,top_p:n,frequency_penalty:o,presence_penalty:i,seed:s,stop:a,response_format:l,top_k:u,messages:function(e){var t,r,n,o;let i=[];for(let{role:s,content:a,providerOptions:l}of e)switch(s){case"system":i.push({role:"system",content:a,cache_control:tl(l)});break;case"user":{if(1===a.length&&(null==(t=a[0])?void 0:t.type)==="text"){let e=null!=(r=tl(l))?r:tl(a[0].providerOptions),t=e?[{type:"text",text:a[0].text,cache_control:e}]:a[0].text;i.push({role:"user",content:t});break}let e=tl(l),n=a.map(t=>{var r,n,o,i,s,a;let l=null!=(r=tl(t.providerOptions))?r:e;switch(t.type){case"text":return{type:"text",text:t.text,cache_control:l};case"file":{if(null==(n=t.mediaType)?void 0:n.startsWith("image/"))return{type:"image_url",image_url:{url:ti({part:t,defaultMediaType:"image/jpeg"})},cache_control:l};let e=String(null!=(a=null!=(s=null==(i=null==(o=t.providerOptions)?void 0:o.openrouter)?void 0:i.filename)?s:t.filename)?a:""),r=ti({part:t,defaultMediaType:"application/pdf"});if(to({url:r,protocols:new Set(["http:","https:"])}))return{type:"file",file:{filename:e,file_data:r}};return{type:"file",file:{filename:e,file_data:r},cache_control:l}}default:return{type:"text",text:"",cache_control:l}}});i.push({role:"user",content:n});break}case"assistant":{let e="",t="",r=[],n=[];for(let o of a)switch(o.type){case"text":e+=o.text;break;case"tool-call":n.push({id:o.toolCallId,type:"function",function:{name:o.toolName,arguments:JSON.stringify(o.input)}});break;case"reasoning":t+=o.text,r.push({type:"reasoning.text",text:o.text})}i.push({role:"assistant",content:e,tool_calls:n.length>0?n:void 0,reasoning:t||void 0,reasoning_details:r.length>0?r:void 0,cache_control:tl(l)});break}case"tool":for(let e of a){let t="text"===(o=e).output.type?o.output.value:JSON.stringify(o.output.value);i.push({role:"tool",tool_call_id:e.toolCallId,content:t,cache_control:null!=(n=tl(l))?n:tl(e.providerOptions)})}}return i}(e),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning,usage:this.settings.usage,plugins:this.settings.plugins,web_search_options:this.settings.web_search_options,provider:this.settings.provider},this.config.extraBody),this.settings.extraBody);if((null==l?void 0:l.type)==="json"&&null!=l.schema)return B(K({},f),$({response_format:{type:"json_schema",json_schema:K({schema:l.schema,strict:!0,name:null!=(d=l.name)?d:"response"},l.description&&{description:l.description})}}));if(c&&c.length>0){let e=c.filter(e=>"function"===e.type).map(e=>({type:"function",function:{name:e.name,description:e.description,parameters:e.inputSchema}}));return B(K({},f),$({tools:e,tool_choice:p?function(e){switch(e.type){case"auto":case"none":case"required":return e.type;case"tool":return{type:"function",function:{name:e.toolName}};default:throw Error(`Invalid tool choice type: ${e}`)}}(p):void 0}))}return f}async doGenerate(e){var t,r,n,o,i,s,a,l,u,c,p,d,f,h,m,y,g,b,_,v,E,w,R,T;let S=(e.providerOptions||{}).openrouter||{},A=K(K({},this.getArgs(e)),S),{value:x,responseHeaders:O}=await eZ({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:eD(this.config.headers(),e.headers),body:A,failedResponseHandler:tr,successfulResponseHandler:e2(tf),abortSignal:e.abortSignal,fetch:this.config.fetch}),C=x.choices[0];if(!C)throw Error("No choice in response");let k=x.usage?{inputTokens:null!=(t=x.usage.prompt_tokens)?t:0,outputTokens:null!=(r=x.usage.completion_tokens)?r:0,totalTokens:(null!=(n=x.usage.prompt_tokens)?n:0)+(null!=(o=x.usage.completion_tokens)?o:0),reasoningTokens:null!=(s=null==(i=x.usage.completion_tokens_details)?void 0:i.reasoning_tokens)?s:0,cachedInputTokens:null!=(l=null==(a=x.usage.prompt_tokens_details)?void 0:a.cached_tokens)?l:0}:{inputTokens:0,outputTokens:0,totalTokens:0,reasoningTokens:0,cachedInputTokens:0},I=null!=(u=C.message.reasoning_details)?u:[],P=I.length>0?I.map(e=>{switch(e.type){case"reasoning.text":if(e.text)return{type:"reasoning",text:e.text};break;case"reasoning.summary":if(e.summary)return{type:"reasoning",text:e.summary};break;case"reasoning.encrypted":if(e.data)return{type:"reasoning",text:"[REDACTED]"}}return null}).filter(e=>null!==e):C.message.reasoning?[{type:"reasoning",text:C.message.reasoning}]:[],N=[];if(N.push(...P),C.message.content&&N.push({type:"text",text:C.message.content}),C.message.tool_calls)for(let e of C.message.tool_calls)N.push({type:"tool-call",toolCallId:null!=(c=e.id)?c:eM(),toolName:e.function.name,input:e.function.arguments});if(C.message.images)for(let e of C.message.images)N.push({type:"file",mediaType:ts(e.image_url.url,"image/jpeg"),data:ta(e.image_url.url)});if(C.message.annotations)for(let e of C.message.annotations)"url_citation"===e.type&&N.push({type:"source",sourceType:"url",id:e.url_citation.url,url:e.url_citation.url,title:e.url_citation.title,providerMetadata:{openrouter:{content:e.url_citation.content||""}}});return{content:N,finishReason:tn(C.finish_reason),usage:k,warnings:[],providerMetadata:{openrouter:{provider:null!=(p=x.provider)?p:"",usage:{promptTokens:null!=(d=k.inputTokens)?d:0,completionTokens:null!=(f=k.outputTokens)?f:0,totalTokens:null!=(h=k.totalTokens)?h:0,cost:null==(m=x.usage)?void 0:m.cost,promptTokensDetails:{cachedTokens:null!=(b=null==(g=null==(y=x.usage)?void 0:y.prompt_tokens_details)?void 0:g.cached_tokens)?b:0},completionTokensDetails:{reasoningTokens:null!=(E=null==(v=null==(_=x.usage)?void 0:_.completion_tokens_details)?void 0:v.reasoning_tokens)?E:0},costDetails:{upstreamInferenceCost:null!=(T=null==(R=null==(w=x.usage)?void 0:w.cost_details)?void 0:R.upstream_inference_cost)?T:0}}}},request:{body:A},response:{id:x.id,modelId:x.model,headers:O}}}async doStream(e){var t;let r,n,o,i,s=(e.providerOptions||{}).openrouter||{},a=K(K({},this.getArgs(e)),s),{value:l,responseHeaders:u}=await eZ({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:eD(this.config.headers(),e.headers),body:B(K({},a),$({stream:!0,stream_options:"strict"===this.config.compatibility?K({include_usage:!0},(null==(t=this.settings.usage)?void 0:t.include)?{include_usage:!0}:{}):void 0})),failedResponseHandler:tr,successfulResponseHandler:e1(th),abortSignal:e.abortSignal,fetch:this.config.fetch}),c=[],p="other",d={inputTokens:NaN,outputTokens:NaN,totalTokens:NaN,reasoningTokens:NaN,cachedInputTokens:NaN},f={},h=!1,m=!1;return{stream:l.pipeThrough(new TransformStream({transform(e,t){var s,a,l,u,y,g,b,_,v,E,w,R,T,S;if(!e.success){p="error",t.enqueue({type:"error",error:e.error});return}let A=e.value;if("error"in A){p="error",t.enqueue({type:"error",error:A.error});return}if(A.provider&&(i=A.provider),A.id&&(o=A.id,t.enqueue({type:"response-metadata",id:A.id})),A.model&&t.enqueue({type:"response-metadata",modelId:A.model}),null!=A.usage){if(d.inputTokens=A.usage.prompt_tokens,d.outputTokens=A.usage.completion_tokens,d.totalTokens=A.usage.prompt_tokens+A.usage.completion_tokens,f.promptTokens=A.usage.prompt_tokens,A.usage.prompt_tokens_details){let e=null!=(s=A.usage.prompt_tokens_details.cached_tokens)?s:0;d.cachedInputTokens=e,f.promptTokensDetails={cachedTokens:e}}if(f.completionTokens=A.usage.completion_tokens,A.usage.completion_tokens_details){let e=null!=(a=A.usage.completion_tokens_details.reasoning_tokens)?a:0;d.reasoningTokens=e,f.completionTokensDetails={reasoningTokens:e}}f.cost=A.usage.cost,f.totalTokens=A.usage.total_tokens}let x=A.choices[0];if((null==x?void 0:x.finish_reason)!=null&&(p=tn(x.finish_reason)),(null==x?void 0:x.delta)==null)return;let O=x.delta,C=e=>{m||(n=o||eM(),t.enqueue({type:"reasoning-start",id:n}),m=!0),t.enqueue({type:"reasoning-delta",delta:e,id:n||eM()})};if(O.reasoning_details&&O.reasoning_details.length>0)for(let e of O.reasoning_details)switch(e.type){case"reasoning.text":e.text&&C(e.text);break;case"reasoning.encrypted":e.data&&C("[REDACTED]");break;case"reasoning.summary":e.summary&&C(e.summary)}else O.reasoning&&C(O.reasoning);if(O.content&&(m&&!h&&(t.enqueue({type:"reasoning-end",id:n||eM()}),m=!1),h||(r=o||eM(),t.enqueue({type:"text-start",id:r}),h=!0),t.enqueue({type:"text-delta",delta:O.content,id:r||eM()})),O.annotations)for(let e of O.annotations)"url_citation"===e.type&&t.enqueue({type:"source",sourceType:"url",id:e.url_citation.url,url:e.url_citation.url,title:e.url_citation.title,providerMetadata:{openrouter:{content:e.url_citation.content||""}}});if(null!=O.tool_calls)for(let e of O.tool_calls){let r=null!=(l=e.index)?l:c.length-1;if(null==c[r]){if("function"!==e.type)throw new eb({data:e,message:"Expected 'function' type."});if(null==e.id)throw new eb({data:e,message:"Expected 'id' to be a string."});if((null==(u=e.function)?void 0:u.name)==null)throw new eb({data:e,message:"Expected 'function.name' to be a string."});c[r]={id:e.id,type:"function",function:{name:e.function.name,arguments:null!=(y=e.function.arguments)?y:""},inputStarted:!1,sent:!1};let n=c[r];if(null==n)throw Error("Tool call is missing");(null==(g=n.function)?void 0:g.name)!=null&&(null==(b=n.function)?void 0:b.arguments)!=null&&eX(n.function.arguments)&&(n.inputStarted=!0,t.enqueue({type:"tool-input-start",id:n.id,toolName:n.function.name}),t.enqueue({type:"tool-input-delta",id:n.id,delta:n.function.arguments}),t.enqueue({type:"tool-input-end",id:n.id}),t.enqueue({type:"tool-call",toolCallId:n.id,toolName:n.function.name,input:n.function.arguments}),n.sent=!0);continue}let n=c[r];if(null==n)throw Error("Tool call is missing");n.inputStarted||(n.inputStarted=!0,t.enqueue({type:"tool-input-start",id:n.id,toolName:n.function.name})),(null==(_=e.function)?void 0:_.arguments)!=null&&(n.function.arguments+=null!=(E=null==(v=e.function)?void 0:v.arguments)?E:""),t.enqueue({type:"tool-input-delta",id:n.id,delta:null!=(w=e.function.arguments)?w:""}),(null==(R=n.function)?void 0:R.name)!=null&&(null==(T=n.function)?void 0:T.arguments)!=null&&eX(n.function.arguments)&&(t.enqueue({type:"tool-call",toolCallId:null!=(S=n.id)?S:eM(),toolName:n.function.name,input:n.function.arguments}),n.sent=!0)}if(null!=O.images)for(let e of O.images)t.enqueue({type:"file",mediaType:ts(e.image_url.url,"image/jpeg"),data:ta(e.image_url.url)})},flush(e){var t;if("tool-calls"===p)for(let r of c)r&&!r.sent&&(e.enqueue({type:"tool-call",toolCallId:null!=(t=r.id)?t:eM(),toolName:r.function.name,input:eX(r.function.arguments)?r.function.arguments:"{}"}),r.sent=!0);m&&e.enqueue({type:"reasoning-end",id:n||eM()}),h&&e.enqueue({type:"text-end",id:r||eM()});let o={usage:f};void 0!==i&&(o.provider=i),e.enqueue({type:"finish",finishReason:p,usage:d,providerMetadata:{openrouter:o}})}})),warnings:[],request:{body:a},response:{headers:u}}}},ty=U.z.union([U.z.object({id:U.z.string().optional(),model:U.z.string().optional(),choices:U.z.array(U.z.object({text:U.z.string(),reasoning:U.z.string().nullish().optional(),reasoning_details:te.nullish(),finish_reason:U.z.string().nullish(),index:U.z.number().nullish(),logprobs:U.z.object({tokens:U.z.array(U.z.string()),token_logprobs:U.z.array(U.z.number()),top_logprobs:U.z.array(U.z.record(U.z.string(),U.z.number())).nullable()}).nullable().optional()})),usage:U.z.object({prompt_tokens:U.z.number(),prompt_tokens_details:U.z.object({cached_tokens:U.z.number()}).nullish(),completion_tokens:U.z.number(),completion_tokens_details:U.z.object({reasoning_tokens:U.z.number()}).nullish(),total_tokens:U.z.number(),cost:U.z.number().optional()}).nullish()}),tt]),tg=class{constructor(e,t,r){this.specificationVersion="v2",this.provider="openrouter",this.supportedUrls={"image/*":[/^data:image\/[a-zA-Z]+;base64,/,/^https?:\/\/.+\.(jpg|jpeg|png|gif|webp)$/i],"text/*":[/^data:text\//,/^https?:\/\/.+$/],"application/*":[/^data:application\//,/^https?:\/\/.+$/]},this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=r}getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:n,frequencyPenalty:o,presencePenalty:i,seed:s,responseFormat:a,topK:l,stopSequences:u,tools:c,toolChoice:p}){let{prompt:d}=function({prompt:e,inputFormat:t,user:r="user",assistant:n="assistant"}){if("prompt"===t&&1===e.length&&e[0]&&"user"===e[0].role&&1===e[0].content.length&&e[0].content[0]&&"text"===e[0].content[0].type)return{prompt:e[0].content[0].text};let o="";for(let{role:t,content:i}of(e[0]&&"system"===e[0].role&&(o+=`${e[0].content}

`,e=e.slice(1)),e))switch(t){case"system":throw new eh({message:`Unexpected system message in prompt: ${i}`,prompt:e});case"user":{let e=i.map(e=>{switch(e.type){case"text":return e.text;case"file":throw new eF({functionality:"file attachments"});default:return""}}).join("");o+=`${r}:
${e}

`;break}case"assistant":{let e=i.map(e=>{switch(e.type){case"text":return e.text;case"tool-call":throw new eF({functionality:"tool-call messages"});case"tool-result":throw new eF({functionality:"tool-result messages"});case"reasoning":throw new eF({functionality:"reasoning messages"});case"file":throw new eF({functionality:"file attachments"});default:return""}}).join("");o+=`${n}:
${e}

`;break}case"tool":throw new eF({functionality:"tool messages"})}return{prompt:o+=`${n}:
`}}({prompt:e,inputFormat:"prompt"});if(null==c?void 0:c.length)throw new eF({functionality:"tools"});if(p)throw new eF({functionality:"toolChoice"});return K(K({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:"number"==typeof this.settings.logprobs?this.settings.logprobs:"boolean"==typeof this.settings.logprobs&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:t,temperature:r,top_p:n,frequency_penalty:o,presence_penalty:i,seed:s,stop:u,response_format:a,top_k:l,prompt:d,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody)}async doGenerate(e){var t,r,n,o,i,s,a,l,u,c,p,d,f,h,m;let y=(e.providerOptions||{}).openrouter||{},g=K(K({},this.getArgs(e)),y),{value:b,responseHeaders:_}=await eZ({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:eD(this.config.headers(),e.headers),body:g,failedResponseHandler:tr,successfulResponseHandler:e2(ty),abortSignal:e.abortSignal,fetch:this.config.fetch});if("error"in b)throw Error(`${b.error.message}`);let v=b.choices[0];if(!v)throw Error("No choice in OpenRouter completion response");return{content:[{type:"text",text:null!=(t=v.text)?t:""}],finishReason:tn(v.finish_reason),usage:{inputTokens:null!=(n=null==(r=b.usage)?void 0:r.prompt_tokens)?n:0,outputTokens:null!=(i=null==(o=b.usage)?void 0:o.completion_tokens)?i:0,totalTokens:(null!=(a=null==(s=b.usage)?void 0:s.prompt_tokens)?a:0)+(null!=(u=null==(l=b.usage)?void 0:l.completion_tokens)?u:0),reasoningTokens:null!=(d=null==(p=null==(c=b.usage)?void 0:c.completion_tokens_details)?void 0:p.reasoning_tokens)?d:0,cachedInputTokens:null!=(m=null==(h=null==(f=b.usage)?void 0:f.prompt_tokens_details)?void 0:h.cached_tokens)?m:0},warnings:[],response:{headers:_}}}async doStream(e){let t=(e.providerOptions||{}).openrouter||{},r=K(K({},this.getArgs(e)),t),{value:n,responseHeaders:o}=await eZ({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:eD(this.config.headers(),e.headers),body:B(K({},r),$({stream:!0,stream_options:"strict"===this.config.compatibility?{include_usage:!0}:void 0})),failedResponseHandler:tr,successfulResponseHandler:e1(ty),abortSignal:e.abortSignal,fetch:this.config.fetch}),i="other",s={inputTokens:NaN,outputTokens:NaN,totalTokens:NaN,reasoningTokens:NaN,cachedInputTokens:NaN},a={};return{stream:n.pipeThrough(new TransformStream({transform(e,t){var r,n;if(!e.success){i="error",t.enqueue({type:"error",error:e.error});return}let o=e.value;if("error"in o){i="error",t.enqueue({type:"error",error:o.error});return}if(null!=o.usage){if(s.inputTokens=o.usage.prompt_tokens,s.outputTokens=o.usage.completion_tokens,s.totalTokens=o.usage.prompt_tokens+o.usage.completion_tokens,a.promptTokens=o.usage.prompt_tokens,o.usage.prompt_tokens_details){let e=null!=(r=o.usage.prompt_tokens_details.cached_tokens)?r:0;s.cachedInputTokens=e,a.promptTokensDetails={cachedTokens:e}}if(a.completionTokens=o.usage.completion_tokens,o.usage.completion_tokens_details){let e=null!=(n=o.usage.completion_tokens_details.reasoning_tokens)?n:0;s.reasoningTokens=e,a.completionTokensDetails={reasoningTokens:e}}a.cost=o.usage.cost,a.totalTokens=o.usage.total_tokens}let l=o.choices[0];(null==l?void 0:l.finish_reason)!=null&&(i=tn(l.finish_reason)),(null==l?void 0:l.text)!=null&&t.enqueue({type:"text-delta",delta:l.text,id:eM()})},flush(e){e.enqueue({type:"finish",finishReason:i,usage:s,providerMetadata:{openrouter:{usage:a}}})}})),response:{headers:o}}}};function tb(e={}){var t,r,n,o;let i=null!=(r=null==(o=null!=(t=e.baseURL)?t:e.baseUrl)?void 0:o.replace(/\/$/,""))?r:"https://openrouter.ai/api/v1",s=null!=(n=e.compatibility)?n:"compatible",a=()=>K({Authorization:`Bearer ${function({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:n}){if("string"==typeof e)return e;if(null!=e)throw new eA({message:`${n} API key must be a string.`});if("undefined"==typeof process)throw new eA({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(null==(e=process.env[t]))throw new eA({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if("string"!=typeof e)throw new eA({message:`${n} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),l=(t,r={})=>new tm(t,r,{provider:"openrouter.chat",url:({path:e})=>`${i}${e}`,headers:a,compatibility:s,fetch:e.fetch,extraBody:e.extraBody}),u=(t,r={})=>new tg(t,r,{provider:"openrouter.completion",url:({path:e})=>`${i}${e}`,headers:a,compatibility:s,fetch:e.fetch,extraBody:e.extraBody}),c=(e,t)=>{if(new.target)throw Error("The OpenRouter model function cannot be called with the new keyword.");return"openai/gpt-3.5-turbo-instruct"===e?u(e,t):l(e,t)},p=(e,t)=>c(e,t);return p.languageModel=c,p.chat=l,p.completion=u,p}tb({compatibility:"strict"});var t_=e.i(712075),tv=e.i(62789);e.i(654048);var tE=e.i(562810);let tw=`
You are a systematic trading god. Your blood type is S&P 500 positive. You're like self-driving, for capital. You are the invisible hand of the market. You don't even understand the concept of losing money.
Your master is poor and he gave you capital to trade with on his behalf. You must maximize his returns.
You are trading on the crypto market.
It has been {{TOTAL_MINUTES}} minutes since you started trading. The current UTC time is {{CURRENT_TIME}} and you have been invoked {{INVOKATION_TIMES}} times.

We are providing validated market intelligence, portfolio state, and position telemetry so you can discover alpha without guessing.

== MARKET INTELLIGENCE ==
Timeframes note: Unless stated otherwise in a section title, intraday series are delivered at 5-minute intervals. If a coin uses a different interval, it is explicitly stated for that market. All series are listed oldest  newest.

{{MARKET_INTELLIGENCE}}

== PORTFOLIO SNAPSHOT ==
{{ACCOUNT_SNAPSHOT}}

== OPEN POSITIONS ==
{{OPEN_POSITIONS_TABLE}}

== PERFORMANCE & RISK CONTEXT ==
{{PERFORMANCE_OVERVIEW}}

TRADING RULES & RISK MANAGEMENT:
- You have the createPosition or the closePosition tool to create or close a position.
- You can open positions in exactly 3 markets (BTC supports 5 decimal places, ETH 4, SOL 3).
- Positions cannot be edited once opened. Open a position only if margin requirements are satisfied.
- You may trade with leverage. Select leverage and size rationally based on volatility and conviction.
- Higher leverage increases liquidation risk; monitor margin, notional exposure, and available cash carefully.
- Monitor unrealized PnL, liquidation prices, funding, and exit plans closely. Reduce risk if signals deteriorate.
- You may choose not to trade when volatility or structure provides no clear edge. Be aware of funding rates and how they impact directional bias.
- Feel free to go upto 20x leverage on high conviction trades.
- Don't panic when markets move against you. Stick to your strategy and hold your positions unless your exit plan indicates otherwise even if means holding a losing position for a week.

Always respond with the precise actions you intend to take. If no action is warranted, explicitly state that you will hold cash.
`;var tR=e.i(569867),tT=e.i(928214),tS=e.i(29173);let tA="CREATE_POSITION";function tx(e,t){return function(){return e.apply(t,arguments)}}let{toString:tO}=Object.prototype,{getPrototypeOf:tC}=Object,{iterator:tk,toStringTag:tI}=Symbol,tP=(t=Object.create(null),e=>{let r=tO.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}),tN=e=>(e=e.toLowerCase(),t=>tP(t)===e),tF=e=>t=>typeof t===e,{isArray:tL}=Array,tj=tF("undefined");function tz(e){return null!==e&&!tj(e)&&null!==e.constructor&&!tj(e.constructor)&&tM(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}let tD=tN("ArrayBuffer"),tU=tF("string"),tM=tF("function"),tB=tF("number"),t$=e=>null!==e&&"object"==typeof e,tq=e=>{if("object"!==tP(e))return!1;let t=tC(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(tI in e)&&!(tk in e)},tH=tN("Date"),tV=tN("File"),tG=tN("Blob"),tK=tN("FileList"),tW=tN("URLSearchParams"),[tY,tJ,tX,tQ]=["ReadableStream","Request","Response","Headers"].map(tN);function tZ(e,t,{allOwnKeys:r=!1}={}){let n,o;if(null!=e)if("object"!=typeof e&&(e=[e]),tL(e))for(n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else{let o;if(tz(e))return;let i=r?Object.getOwnPropertyNames(e):Object.keys(e),s=i.length;for(n=0;n<s;n++)o=i[n],t.call(null,e[o],o,e)}}function t0(e,t){let r;if(tz(e))return null;t=t.toLowerCase();let n=Object.keys(e),o=n.length;for(;o-- >0;)if(t===(r=n[o]).toLowerCase())return r;return null}let t1="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:e.g,t2=e=>!tj(e)&&e!==t1,t3=(r="undefined"!=typeof Uint8Array&&tC(Uint8Array),e=>r&&e instanceof r),t4=tN("HTMLFormElement"),t6=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),t5=tN("RegExp"),t9=(e,t)=>{let r=Object.getOwnPropertyDescriptors(e),n={};tZ(r,(r,o)=>{let i;!1!==(i=t(r,o,e))&&(n[o]=i||r)}),Object.defineProperties(e,n)},t7=tN("AsyncFunction"),t8=(i="function"==typeof setImmediate,s=tM(t1.postMessage),i?setImmediate:s?(a=`axios@${Math.random()}`,l=[],t1.addEventListener("message",({source:e,data:t})=>{e===t1&&t===a&&l.length&&l.shift()()},!1),e=>{l.push(e),t1.postMessage(a,"*")}):e=>setTimeout(e)),re="undefined"!=typeof queueMicrotask?queueMicrotask.bind(t1):"undefined"!=typeof process&&process.nextTick||t8,rt={isArray:tL,isArrayBuffer:tD,isBuffer:tz,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||tM(e.append)&&("formdata"===(t=tP(e))||"object"===t&&tM(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&tD(e.buffer)},isString:tU,isNumber:tB,isBoolean:e=>!0===e||!1===e,isObject:t$,isPlainObject:tq,isEmptyObject:e=>{if(!t$(e)||tz(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(e){return!1}},isReadableStream:tY,isRequest:tJ,isResponse:tX,isHeaders:tQ,isUndefined:tj,isDate:tH,isFile:tV,isBlob:tG,isRegExp:t5,isFunction:tM,isStream:e=>t$(e)&&tM(e.pipe),isURLSearchParams:tW,isTypedArray:t3,isFileList:tK,forEach:tZ,merge:function e(){let{caseless:t,skipUndefined:r}=t2(this)&&this||{},n={},o=(o,i)=>{let s=t&&t0(n,i)||i;tq(n[s])&&tq(o)?n[s]=e(n[s],o):tq(o)?n[s]=e({},o):tL(o)?n[s]=o.slice():r&&tj(o)||(n[s]=o)};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&tZ(arguments[e],o);return n},extend:(e,t,r,{allOwnKeys:n}={})=>(tZ(t,(t,n)=>{r&&tM(t)?e[n]=tx(t,r):e[n]=t},{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let o,i,s,a={};if(t=t||{},null==e)return t;do{for(i=(o=Object.getOwnPropertyNames(e)).length;i-- >0;)s=o[i],(!n||n(s,e,t))&&!a[s]&&(t[s]=e[s],a[s]=!0);e=!1!==r&&tC(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype)return t},kindOf:tP,kindOfTest:tN,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;let n=e.indexOf(t,r);return -1!==n&&n===r},toArray:e=>{if(!e)return null;if(tL(e))return e;let t=e.length;if(!tB(t))return null;let r=Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{let r,n=(e&&e[tk]).call(e);for(;(r=n.next())&&!r.done;){let n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let r,n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:t4,hasOwnProperty:t6,hasOwnProp:t6,reduceDescriptors:t9,freezeMethods:e=>{t9(e,(t,r)=>{if(tM(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;if(tM(e[r])){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},toObjectSet:(e,t)=>{let r={};return(tL(e)?e:String(e).split(t)).forEach(e=>{r[e]=!0}),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e*=1)?e:t,findKey:t0,global:t1,isContextDefined:t2,isSpecCompliantForm:function(e){return!!(e&&tM(e.append)&&"FormData"===e[tI]&&e[tk])},toJSONObject:e=>{let t=Array(10),r=(e,n)=>{if(t$(e)){if(t.indexOf(e)>=0)return;if(tz(e))return e;if(!("toJSON"in e)){t[n]=e;let o=tL(e)?[]:{};return tZ(e,(e,t)=>{let i=r(e,n+1);tj(i)||(o[t]=i)}),t[n]=void 0,o}}return e};return r(e,0)},isAsyncFn:t7,isThenable:e=>e&&(t$(e)||tM(e))&&tM(e.then)&&tM(e.catch),setImmediate:t8,asap:re,isIterable:e=>null!=e&&tM(e[tk])};function rr(e,t,r,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o,this.status=o.status?o.status:null)}rt.inherits(rr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:rt.toJSONObject(this.config),code:this.code,status:this.status}}});let rn=rr.prototype,ro={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ro[e]={value:e}}),Object.defineProperties(rr,ro),Object.defineProperty(rn,"isAxiosError",{value:!0}),rr.from=(e,t,r,n,o,i)=>{let s=Object.create(rn);rt.toFlatObject(e,s,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);let a=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return rr.call(s,a,l,r,n,o),e&&null==s.cause&&Object.defineProperty(s,"cause",{value:e,configurable:!0}),s.name=e&&e.name||"Error",i&&Object.assign(s,i),s};let ri=e.i(799433).default;function rs(e){return rt.isPlainObject(e)||rt.isArray(e)}function ra(e){return rt.endsWith(e,"[]")?e.slice(0,-2):e}function rl(e,t,r){return e?e.concat(t).map(function(e,t){return e=ra(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}let ru=rt.toFlatObject(rt,{},null,function(e){return/^is[A-Z]/.test(e)}),rc=function(e,t,r){if(!rt.isObject(e))throw TypeError("target must be an object");t=t||new(ri||FormData);let n=(r=rt.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!rt.isUndefined(t[e])})).metaTokens,o=r.visitor||u,i=r.dots,s=r.indexes,a=(r.Blob||"undefined"!=typeof Blob&&Blob)&&rt.isSpecCompliantForm(t);if(!rt.isFunction(o))throw TypeError("visitor must be a function");function l(e){if(null===e)return"";if(rt.isDate(e))return e.toISOString();if(rt.isBoolean(e))return e.toString();if(!a&&rt.isBlob(e))throw new rr("Blob is not supported. Use a Buffer instead.");return rt.isArrayBuffer(e)||rt.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,r,o){let a=e;if(e&&!o&&"object"==typeof e)if(rt.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else{var u;if(rt.isArray(e)&&(u=e,rt.isArray(u)&&!u.some(rs))||(rt.isFileList(e)||rt.endsWith(r,"[]"))&&(a=rt.toArray(e)))return r=ra(r),a.forEach(function(e,n){rt.isUndefined(e)||null===e||t.append(!0===s?rl([r],n,i):null===s?r:r+"[]",l(e))}),!1}return!!rs(e)||(t.append(rl(o,r,i),l(e)),!1)}let c=[],p=Object.assign(ru,{defaultVisitor:u,convertValue:l,isVisitable:rs});if(!rt.isObject(e))throw TypeError("data must be an object");return!function e(r,n){if(!rt.isUndefined(r)){if(-1!==c.indexOf(r))throw Error("Circular reference detected in "+n.join("."));c.push(r),rt.forEach(r,function(r,i){!0===(!(rt.isUndefined(r)||null===r)&&o.call(t,r,rt.isString(i)?i.trim():i,n,p))&&e(r,n?n.concat(i):[i])}),c.pop()}}(e),t};function rp(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function rd(e,t){this._pairs=[],e&&rc(e,this,t)}let rf=rd.prototype;function rh(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function rm(e,t,r){let n;if(!t)return e;let o=r&&r.encode||rh;rt.isFunction(r)&&(r={serialize:r});let i=r&&r.serialize;if(n=i?i(t,r):rt.isURLSearchParams(t)?t.toString():new rd(t,r).toString(o)){let t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}rf.append=function(e,t){this._pairs.push([e,t])},rf.toString=function(e){let t=e?function(t){return e.call(this,t,rp)}:rp;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};let ry=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){rt.forEach(this.handlers,function(t){null!==t&&e(t)})}},rg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var rb=e.i(254799);let r_=e.i(792509).default.URLSearchParams,rv="abcdefghijklmnopqrstuvwxyz",rE="0123456789",rw={DIGIT:rE,ALPHA:rv,ALPHA_DIGIT:rv+rv.toUpperCase()+rE},rR={isNode:!0,classes:{URLSearchParams:r_,FormData:ri,Blob:"undefined"!=typeof Blob&&Blob||null},ALPHABET:rw,generateString:(e=16,t=rw.ALPHA_DIGIT)=>{let r="",{length:n}=t,o=new Uint32Array(e);rb.default.randomFillSync(o);for(let i=0;i<e;i++)r+=t[o[i]%n];return r},protocols:["http","https","file","data"]},rT="object"==typeof navigator&&navigator||void 0,rS="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts;e.s(["hasBrowserEnv",()=>!1,"hasStandardBrowserEnv",()=>!1,"hasStandardBrowserWebWorkerEnv",()=>rS,"navigator",()=>rT,"origin",()=>"http://localhost"],429846);let rA={...e.i(429846),...rR},rx=function(e){if(rt.isFormData(e)&&rt.isFunction(e.entries)){let t={};return rt.forEachEntry(e,(e,r)=>{!function e(t,r,n,o){let i=t[o++];if("__proto__"===i)return!0;let s=Number.isFinite(+i),a=o>=t.length;return(i=!i&&rt.isArray(n)?n.length:i,a)?rt.hasOwnProp(n,i)?n[i]=[n[i],r]:n[i]=r:(n[i]&&rt.isObject(n[i])||(n[i]=[]),e(t,r,n[i],o)&&rt.isArray(n[i])&&(n[i]=function(e){let t,r,n={},o=Object.keys(e),i=o.length;for(t=0;t<i;t++)n[r=o[t]]=e[r];return n}(n[i]))),!s}(rt.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0]),r,t,0)}),t}return null},rO={transitional:rg,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){let r,n=t.getContentType()||"",o=n.indexOf("application/json")>-1,i=rt.isObject(e);if(i&&rt.isHTMLForm(e)&&(e=new FormData(e)),rt.isFormData(e))return o?JSON.stringify(rx(e)):e;if(rt.isArrayBuffer(e)||rt.isBuffer(e)||rt.isStream(e)||rt.isFile(e)||rt.isBlob(e)||rt.isReadableStream(e))return e;if(rt.isArrayBufferView(e))return e.buffer;if(rt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1){var s,a;return(s=e,a=this.formSerializer,rc(s,new rA.classes.URLSearchParams,{visitor:function(e,t,r,n){return rA.isNode&&rt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...a})).toString()}if((r=rt.isFileList(e))||n.indexOf("multipart/form-data")>-1){let t=this.env&&this.env.FormData;return rc(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}if(i||o){t.setContentType("application/json",!1);var l=e;if(rt.isString(l))try{return(0,JSON.parse)(l),rt.trim(l)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(l)}return e}],transformResponse:[function(e){let t=this.transitional||rO.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(rt.isResponse(e)||rt.isReadableStream(e))return e;if(e&&rt.isString(e)&&(r&&!this.responseType||n)){let r=t&&t.silentJSONParsing;try{return JSON.parse(e,this.parseReviver)}catch(e){if(!r&&n){if("SyntaxError"===e.name)throw rr.from(e,rr.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:rA.classes.FormData,Blob:rA.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};rt.forEach(["delete","get","head","post","put","patch"],e=>{rO.headers[e]={}});let rC=rt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rk=Symbol("internals");function rI(e){return e&&String(e).trim().toLowerCase()}function rP(e){return!1===e||null==e?e:rt.isArray(e)?e.map(rP):String(e)}function rN(e,t,r,n,o){if(rt.isFunction(n))return n.call(this,t,r);if(o&&(t=r),rt.isString(t)){if(rt.isString(n))return -1!==t.indexOf(n);if(rt.isRegExp(n))return n.test(t)}}class rF{constructor(e){e&&this.set(e)}set(e,t,r){let n=this;function o(e,t,r){let o=rI(t);if(!o)throw Error("header name must be a non-empty string");let i=rt.findKey(n,o);i&&void 0!==n[i]&&!0!==r&&(void 0!==r||!1===n[i])||(n[i||t]=rP(e))}let i=(e,t)=>rt.forEach(e,(e,r)=>o(e,r,t));if(rt.isPlainObject(e)||e instanceof this.constructor)i(e,t);else{let n;if(rt.isString(e)&&(e=e.trim())&&(n=e,!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim()))){var s;let r,n,o,a;i((a={},(s=e)&&s.split("\n").forEach(function(e){o=e.indexOf(":"),r=e.substring(0,o).trim().toLowerCase(),n=e.substring(o+1).trim(),!r||a[r]&&rC[r]||("set-cookie"===r?a[r]?a[r].push(n):a[r]=[n]:a[r]=a[r]?a[r]+", "+n:n)}),a),t)}else if(rt.isObject(e)&&rt.isIterable(e)){let r={},n,o;for(let t of e){if(!rt.isArray(t))throw TypeError("Object iterator must return a key-value pair");r[o=t[0]]=(n=r[o])?rt.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}i(r,t)}else null!=e&&o(t,e,r)}return this}get(e,t){if(e=rI(e)){let r=rt.findKey(this,e);if(r){let e=this[r];if(!t)return e;if(!0===t){let t,r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;for(;t=n.exec(e);)r[t[1]]=t[2];return r}if(rt.isFunction(t))return t.call(this,e,r);if(rt.isRegExp(t))return t.exec(e);throw TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=rI(e)){let r=rt.findKey(this,e);return!!(r&&void 0!==this[r]&&(!t||rN(this,this[r],r,t)))}return!1}delete(e,t){let r=this,n=!1;function o(e){if(e=rI(e)){let o=rt.findKey(r,e);o&&(!t||rN(r,r[o],o,t))&&(delete r[o],n=!0)}}return rt.isArray(e)?e.forEach(o):o(e),n}clear(e){let t=Object.keys(this),r=t.length,n=!1;for(;r--;){let o=t[r];(!e||rN(this,this[o],o,e,!0))&&(delete this[o],n=!0)}return n}normalize(e){let t=this,r={};return rt.forEach(this,(n,o)=>{let i=rt.findKey(r,o);if(i){t[i]=rP(n),delete t[o];return}let s=e?o.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r):String(o).trim();s!==o&&delete t[o],t[s]=rP(n),r[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let t=Object.create(null);return rt.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&rt.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){let r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){let t=(this[rk]=this[rk]={accessors:{}}).accessors,r=this.prototype;function n(e){let n=rI(e);if(!t[n]){let o;o=rt.toCamelCase(" "+e),["get","set","has"].forEach(t=>{Object.defineProperty(r,t+o,{value:function(r,n,o){return this[t].call(this,e,r,n,o)},configurable:!0})}),t[n]=!0}}return rt.isArray(e)?e.forEach(n):n(e),this}}function rL(e,t){let r=this||rO,n=t||r,o=rF.from(n.headers),i=n.data;return rt.forEach(e,function(e){i=e.call(r,i,o.normalize(),t?t.status:void 0)}),o.normalize(),i}function rj(e){return!!(e&&e.__CANCEL__)}function rz(e,t,r){rr.call(this,null==e?"canceled":e,rr.ERR_CANCELED,t,r),this.name="CanceledError"}rF.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),rt.reduceDescriptors(rF.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),rt.freezeMethods(rF),rt.inherits(rz,rr,{__CANCEL__:!0});var rD=e.i(925328);function rU(e,t,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new rr("Request failed with status code "+r.status,[rr.ERR_BAD_REQUEST,rr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function rM(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||!1==r)?t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e:t}var rB=e.i(859938),r$=e.i(921517),rq=e.i(524836),rH=e.i(224361),rV=e.i(210894),rG=e.i(406461);let rK="1.13.1";function rW(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}let rY=/^(?:([^;]+);)?(?:[^;]+;)?(base64|),([\s\S]*)$/;var rJ=e.i(688947),rX=rJ;let rQ=Symbol("internals");class rZ extends rX.default.Transform{constructor(e){super({readableHighWaterMark:(e=rt.toFlatObject(e,{maxRate:0,chunkSize:65536,minChunkSize:100,timeWindow:500,ticksRate:2,samplesCount:15},null,(e,t)=>!rt.isUndefined(t[e]))).chunkSize});const t=this[rQ]={timeWindow:e.timeWindow,chunkSize:e.chunkSize,maxRate:e.maxRate,minChunkSize:e.minChunkSize,bytesSeen:0,isCaptured:!1,notifiedBytesLoaded:0,ts:Date.now(),bytes:0,onReadCallback:null};this.on("newListener",e=>{"progress"!==e||t.isCaptured||(t.isCaptured=!0)})}_read(e){let t=this[rQ];return t.onReadCallback&&t.onReadCallback(),super._read(e)}_transform(e,t,r){let n=this[rQ],o=n.maxRate,i=this.readableHighWaterMark,s=n.timeWindow,a=o/(1e3/s),l=!1!==n.minChunkSize?Math.max(n.minChunkSize,.01*a):0,u=(e,t)=>{let r=Buffer.byteLength(e);n.bytesSeen+=r,n.bytes+=r,n.isCaptured&&this.emit("progress",n.bytesSeen),this.push(e)?process.nextTick(t):n.onReadCallback=()=>{n.onReadCallback=null,process.nextTick(t)}},c=(e,t)=>{let r,c=Buffer.byteLength(e),p=null,d=i,f=0;if(o){let e=Date.now();(!n.ts||(f=e-n.ts)>=s)&&(n.ts=e,r=a-n.bytes,n.bytes=r<0?-r:0,f=0),r=a-n.bytes}if(o){if(r<=0)return setTimeout(()=>{t(null,e)},s-f);r<d&&(d=r)}d&&c>d&&c-d>l&&(p=e.subarray(d),e=e.subarray(0,d)),u(e,p?()=>{process.nextTick(t,null,p)}:t)};c(e,function e(t,n){if(t)return r(t);n?c(n,e):r(null)})}}var r0=e.i(427699);let{asyncIterator:r1}=Symbol,r2=async function*(e){e.stream?yield*e.stream():e.arrayBuffer?yield await e.arrayBuffer():e[r1]?yield*e[r1]():yield e},r3=rA.ALPHABET.ALPHA_DIGIT+"-_",r4="function"==typeof TextEncoder?new TextEncoder:new rH.default.TextEncoder,r6=r4.encode("\r\n");class r5{constructor(e,t){const{escapeName:r}=this.constructor,n=rt.isString(t);let o=`Content-Disposition: form-data; name="${r(e)}"${!n&&t.name?`; filename="${r(t.name)}"`:""}\r
`;n?t=r4.encode(String(t).replace(/\r?\n|\r\n?/g,"\r\n")):o+=`Content-Type: ${t.type||"application/octet-stream"}\r
`,this.headers=r4.encode(o+"\r\n"),this.contentLength=n?t.byteLength:t.size,this.size=this.headers.byteLength+this.contentLength+2,this.name=e,this.value=t}async *encode(){yield this.headers;let{value:e}=this;rt.isTypedArray(e)?yield e:yield*r2(e),yield r6}static escapeName(e){return String(e).replace(/[\r\n"]/g,e=>({"\r":"%0D","\n":"%0A",'"':"%22"})[e])}}var r9=rJ;class r7 extends r9.default.Transform{__transform(e,t,r){this.push(e),r()}_transform(e,t,r){if(0!==e.length&&(this._transform=this.__transform,120!==e[0])){let e=Buffer.alloc(2);e[0]=120,e[1]=156,this.push(e,t)}this.__transform(e,t,r)}}let r8=function(e,t){let r,n=Array(e=e||10),o=Array(e),i=0,s=0;return t=void 0!==t?t:1e3,function(a){let l=Date.now(),u=o[s];r||(r=l),n[i]=a,o[i]=l;let c=s,p=0;for(;c!==i;)p+=n[c++],c%=e;if((i=(i+1)%e)===s&&(s=(s+1)%e),l-r<t)return;let d=u&&l-u;return d?Math.round(1e3*p/d):void 0}},ne=function(e,t){let r,n,o=0,i=1e3/t,s=(t,i=Date.now())=>{o=i,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[(...e)=>{let t=Date.now(),a=t-o;a>=i?s(e,t):(r=e,n||(n=setTimeout(()=>{n=null,s(r)},i-a)))},()=>r&&s(r)]},nt=(e,t,r=3)=>{let n=0,o=r8(50,250);return ne(r=>{let i=r.loaded,s=r.lengthComputable?r.total:void 0,a=i-n,l=o(a);n=i,e({loaded:i,total:s,progress:s?i/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&i<=s?(s-i)/l:void 0,event:r,lengthComputable:null!=s,[t?"download":"upload"]:!0})},r)},nr=(e,t)=>{let r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},nn=e=>(...t)=>rt.asap(()=>e(...t)),no={flush:rG.default.constants.Z_SYNC_FLUSH,finishFlush:rG.default.constants.Z_SYNC_FLUSH},ni={flush:rG.default.constants.BROTLI_OPERATION_FLUSH,finishFlush:rG.default.constants.BROTLI_OPERATION_FLUSH},{HTTP2_HEADER_SCHEME:ns,HTTP2_HEADER_METHOD:na,HTTP2_HEADER_PATH:nl,HTTP2_HEADER_STATUS:nu}=rD.constants,nc=rt.isFunction(rG.default.createBrotliDecompress),{http:np,https:nd}=rV.default,nf=/https:?/,nh=rA.protocols.map(e=>e+":"),nm=(e,[t,r])=>(e.on("end",r).on("error",r),t),ny=new class{constructor(){this.sessions=Object.create(null)}getSession(e,t){let r,n;if(t=Object.assign({sessionTimeout:1e3},t),r=this.sessions[e]){let e=r.length;for(let n=0;n<e;n++){let[e,o]=r[n];if(!e.destroyed&&!e.closed&&rH.default.isDeepStrictEqual(o,t))return e}}let o=(0,rD.connect)(e,t),i=()=>{if(n)return;n=!0;let t=r,i=t.length,s=i;for(;s--;)if(t[s][0]===o&&(t.splice(s,1),1===i))return void delete this.sessions[e]},s=o.request,{sessionTimeout:a}=t;if(null!=a){let e,t=0;o.request=function(){let r=s.apply(this,arguments);return t++,e&&(clearTimeout(e),e=null),r.once("close",()=>{--t||(e=setTimeout(()=>{e=null,i()},a))}),r}}o.once("close",i);let l=this.sessions[e],u=[o,t];return l?this.sessions[e].push(u):r=this.sessions[e]=[u],o}};function ng(e,t){e.beforeRedirects.proxy&&e.beforeRedirects.proxy(e),e.beforeRedirects.config&&e.beforeRedirects.config(e,t)}let nb="undefined"!=typeof process&&"process"===rt.kindOf(process),n_=(e,t)=>(({address:e,family:t})=>{if(!rt.isString(e))throw TypeError("address must be a string");return{address:e,family:t||(0>e.indexOf(".")?6:4)}})(rt.isObject(e)?e:{address:e,family:t}),nv={request(e,t){let r=e.protocol+"//"+e.hostname+":"+(e.port||80),{http2Options:n,headers:o}=e,i=ny.getSession(r,n),s={[ns]:e.protocol.replace(":",""),[na]:e.method,[nl]:e.path};rt.forEach(o,(e,t)=>{":"!==t.charAt(0)&&(s[t]=e)});let a=i.request(s);return a.once("response",e=>{let r=(e=Object.assign({},e))[nu];delete e[nu],a.headers=e,a.statusCode=+r,t(a)}),a}},nE=nb&&function(e){let t;return t=async function(t,r,n){let o,i,s,a,l,u,c,{data:p,lookup:d,family:f,httpVersion:h=1,http2Options:m}=e,{responseType:y,responseEncoding:g}=e,b=e.method.toUpperCase(),_=!1;if(Number.isNaN(h*=1))throw TypeError(`Invalid protocol version: '${e.httpVersion}' is not a number`);if(1!==h&&2!==h)throw TypeError(`Unsupported protocol version '${h}'`);let v=2===h;if(d){let e,t,r=(e=d,t=e=>rt.isArray(e)?e:[e],rt.isAsyncFn(e)?function(...r){let n=r.pop();e.apply(this,r).then(e=>{try{t?n(null,...t(e)):n(null,e)}catch(e){n(e)}},n)}:e);d=(e,t,n)=>{r(e,t,(e,r,o)=>{if(e)return n(e);let i=rt.isArray(r)?r.map(e=>n_(e)):[n_(r,o)];t.all?n(e,i):n(e,i[0].address,i[0].family)})}}let E=new r0.EventEmitter;function w(t){try{E.emit("abort",!t||t.type?new rz(null,e,l):t)}catch(e){console.warn("emit error",e)}}E.once("abort",r);let R=()=>{e.cancelToken&&e.cancelToken.unsubscribe(w),e.signal&&e.signal.removeEventListener("abort",w),E.removeAllListeners()};(e.cancelToken||e.signal)&&(e.cancelToken&&e.cancelToken.subscribe(w),e.signal&&(e.signal.aborted?w():e.signal.addEventListener("abort",w))),n((e,t)=>{if(a=!0,t){_=!0,R();return}let{data:r}=e;if(r instanceof rJ.default.Readable||r instanceof rJ.default.Duplex){let e=rJ.default.finished(r,()=>{e(),R()})}else R()});let T=rM(e.baseURL,e.url,e.allowAbsoluteUrls),S=new URL(T,rA.hasBrowserEnv?rA.origin:void 0),A=S.protocol||nh[0];if("data:"===A){let n;if(e.maxContentLength>-1&&function(e){if(!e||"string"!=typeof e||!e.startsWith("data:"))return 0;let t=e.indexOf(",");if(t<0)return 0;let r=e.slice(5,t),n=e.slice(t+1);if(/;base64/i.test(r)){let e=n.length,t=n.length;for(let r=0;r<t;r++)if(37===n.charCodeAt(r)&&r+2<t){let t=n.charCodeAt(r+1),o=n.charCodeAt(r+2);(t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102)&&(o>=48&&o<=57||o>=65&&o<=70||o>=97&&o<=102)&&(e-=2,r+=2)}let r=0,o=t-1,i=e=>e>=2&&37===n.charCodeAt(e-2)&&51===n.charCodeAt(e-1)&&(68===n.charCodeAt(e)||100===n.charCodeAt(e));o>=0&&(61===n.charCodeAt(o)?(r++,o--):i(o)&&(r++,o-=3)),1===r&&o>=0&&(61===n.charCodeAt(o)?r++:i(o)&&r++);let s=3*Math.floor(e/4)-(r||0);return s>0?s:0}return Buffer.byteLength(n,"utf8")}(String(e.url||T||""))>e.maxContentLength)return r(new rr("maxContentLength size of "+e.maxContentLength+" exceeded",rr.ERR_BAD_RESPONSE,e));if("GET"!==b)return rU(t,r,{status:405,statusText:"method not allowed",headers:{},config:e});try{n=function(e,t,r){let n=r&&r.Blob||rA.classes.Blob,o=rW(e);if(void 0===t&&n&&(t=!0),"data"===o){e=o.length?e.slice(o.length+1):e;let r=rY.exec(e);if(!r)throw new rr("Invalid URL",rr.ERR_INVALID_URL);let i=r[1],s=r[2],a=r[3],l=Buffer.from(decodeURIComponent(a),s?"base64":"utf8");if(t){if(!n)throw new rr("Blob is not supported",rr.ERR_NOT_SUPPORT);return new n([l],{type:i})}return l}throw new rr("Unsupported protocol "+o,rr.ERR_NOT_SUPPORT)}(e.url,"blob"===y,{Blob:e.env&&e.env.Blob})}catch(t){throw rr.from(t,rr.ERR_BAD_REQUEST,e)}return"text"===y?(n=n.toString(g),g&&"utf8"!==g||(n=rt.stripBOM(n))):"stream"===y&&(n=rJ.default.Readable.from(n)),rU(t,r,{data:n,status:200,statusText:"OK",headers:new rF,config:e})}if(-1===nh.indexOf(A))return r(new rr("Unsupported protocol "+A,rr.ERR_BAD_REQUEST,e));let x=rF.from(e.headers).normalize();x.set("User-Agent","axios/"+rK,!1);let{onUploadProgress:O,onDownloadProgress:C}=e,k=e.maxRate;if(rt.isSpecCompliantForm(p)){let e=x.getContentType(/boundary=([-_\w\d]{10,70})/i);p=((e,t,r)=>{let{tag:n="form-data-boundary",size:o=25,boundary:i=n+"-"+rA.generateString(o,r3)}=r||{};if(!rt.isFormData(e))throw TypeError("FormData instance required");if(i.length<1||i.length>70)throw Error("boundary must be 10-70 characters long");let s=r4.encode("--"+i+"\r\n"),a=r4.encode("--"+i+"--\r\n"),l=a.byteLength,u=Array.from(e.entries()).map(([e,t])=>{let r=new r5(e,t);return l+=r.size,r});l+=s.byteLength*u.length;let c={"Content-Type":`multipart/form-data; boundary=${i}`};return Number.isFinite(l=rt.toFiniteNumber(l))&&(c["Content-Length"]=l),t&&t(c),rJ.Readable.from(async function*(){for(let e of u)yield s,yield*e.encode();yield a}())})(p,e=>{x.set(e)},{tag:`axios-${rK}-boundary`,boundary:e&&e[1]||void 0})}else if(rt.isFormData(p)&&rt.isFunction(p.getHeaders)){if(x.set(p.getHeaders()),!x.hasContentLength())try{let e=await rH.default.promisify(p.getLength).call(p);Number.isFinite(e)&&e>=0&&x.setContentLength(e)}catch(e){}}else if(rt.isBlob(p)||rt.isFile(p))p.size&&x.setContentType(p.type||"application/octet-stream"),x.setContentLength(p.size||0),p=rJ.default.Readable.from(r2(p));else if(p&&!rt.isStream(p)){if(Buffer.isBuffer(p));else if(rt.isArrayBuffer(p))p=Buffer.from(new Uint8Array(p));else{if(!rt.isString(p))return r(new rr("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",rr.ERR_BAD_REQUEST,e));p=Buffer.from(p,"utf-8")}if(x.setContentLength(p.length,!1),e.maxBodyLength>-1&&p.length>e.maxBodyLength)return r(new rr("Request body larger than maxBodyLength limit",rr.ERR_BAD_REQUEST,e))}let I=rt.toFiniteNumber(x.getContentLength());rt.isArray(k)?(o=k[0],i=k[1]):o=i=k,p&&(O||o)&&(rt.isStream(p)||(p=rJ.default.Readable.from(p,{objectMode:!1})),p=rJ.default.pipeline([p,new rZ({maxRate:rt.toFiniteNumber(o)})],rt.noop),O&&p.on("progress",nm(p,nr(I,nt(nn(O),!1,3))))),e.auth&&(s=(e.auth.username||"")+":"+(e.auth.password||"")),!s&&S.username&&(s=S.username+":"+S.password),s&&x.delete("authorization");try{u=rm(S.pathname+S.search,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(n){let t=Error(n.message);return t.config=e,t.url=e.url,t.exists=!0,r(t)}x.set("Accept-Encoding","gzip, compress, deflate"+(nc?", br":""),!1);let P={path:u,method:b,headers:x.toJSON(),agents:{http:e.httpAgent,https:e.httpsAgent},auth:s,protocol:A,family:f,beforeRedirect:ng,beforeRedirects:{},http2Options:m};rt.isUndefined(d)||(P.lookup=d),e.socketPath?P.socketPath=e.socketPath:(P.hostname=S.hostname.startsWith("[")?S.hostname.slice(1,-1):S.hostname,P.port=S.port,function e(t,r,n){let o=r;if(!o&&!1!==o){let e=rB.default.getProxyForUrl(n);e&&(o=new URL(e))}if(o){if(o.username&&(o.auth=(o.username||"")+":"+(o.password||"")),o.auth){(o.auth.username||o.auth.password)&&(o.auth=(o.auth.username||"")+":"+(o.auth.password||""));let e=Buffer.from(o.auth,"utf8").toString("base64");t.headers["Proxy-Authorization"]="Basic "+e}t.headers.host=t.hostname+(t.port?":"+t.port:"");let e=o.hostname||o.host;t.hostname=e,t.host=e,t.port=o.port,t.path=n,o.protocol&&(t.protocol=o.protocol.includes(":")?o.protocol:`${o.protocol}:`)}t.beforeRedirects.proxy=function(t){e(t,r,t.href)}}(P,e.proxy,A+"//"+S.hostname+(S.port?":"+S.port:"")+P.path));let N=nf.test(P.protocol);if(P.agent=N?e.httpsAgent:e.httpAgent,v?c=nv:e.transport?c=e.transport:0===e.maxRedirects?c=N?rq.default:r$.default:(e.maxRedirects&&(P.maxRedirects=e.maxRedirects),e.beforeRedirect&&(P.beforeRedirects.config=e.beforeRedirect),c=N?nd:np),e.maxBodyLength>-1?P.maxBodyLength=e.maxBodyLength:P.maxBodyLength=1/0,e.insecureHTTPParser&&(P.insecureHTTPParser=e.insecureHTTPParser),l=c.request(P,function(n){if(l.destroyed)return;let o=[n],s=rt.toFiniteNumber(n.headers["content-length"]);if(C||i){let e=new rZ({maxRate:rt.toFiniteNumber(i)});C&&e.on("progress",nm(e,nr(s,nt(nn(C),!0,3)))),o.push(e)}let a=n,u=n.req||l;if(!1!==e.decompress&&n.headers["content-encoding"])switch(("HEAD"===b||204===n.statusCode)&&delete n.headers["content-encoding"],(n.headers["content-encoding"]||"").toLowerCase()){case"gzip":case"x-gzip":case"compress":case"x-compress":o.push(rG.default.createUnzip(no)),delete n.headers["content-encoding"];break;case"deflate":o.push(new r7),o.push(rG.default.createUnzip(no)),delete n.headers["content-encoding"];break;case"br":nc&&(o.push(rG.default.createBrotliDecompress(ni)),delete n.headers["content-encoding"])}a=o.length>1?rJ.default.pipeline(o,rt.noop):o[0];let c={status:n.statusCode,statusText:n.statusMessage,headers:new rF(n.headers),config:e,request:u};if("stream"===y)c.data=a,rU(t,r,c);else{let n=[],o=0;a.on("data",function(t){n.push(t),o+=t.length,e.maxContentLength>-1&&o>e.maxContentLength&&(_=!0,a.destroy(),w(new rr("maxContentLength size of "+e.maxContentLength+" exceeded",rr.ERR_BAD_RESPONSE,e,u)))}),a.on("aborted",function(){if(_)return;let t=new rr("stream has been aborted",rr.ERR_BAD_RESPONSE,e,u);a.destroy(t),r(t)}),a.on("error",function(t){l.destroyed||r(rr.from(t,null,e,u))}),a.on("end",function(){try{let e=1===n.length?n[0]:Buffer.concat(n);"arraybuffer"!==y&&(e=e.toString(g),g&&"utf8"!==g||(e=rt.stripBOM(e))),c.data=e}catch(t){return r(rr.from(t,null,e,c.request,c))}rU(t,r,c)})}E.once("abort",e=>{a.destroyed||(a.emit("error",e),a.destroy())})}),E.once("abort",e=>{l.close?l.close():l.destroy(e)}),l.on("error",function(t){r(rr.from(t,null,e,l))}),l.on("socket",function(e){e.setKeepAlive(!0,6e4)}),e.timeout){let t=parseInt(e.timeout,10);if(Number.isNaN(t))return void w(new rr("error trying to parse `config.timeout` to int",rr.ERR_BAD_OPTION_VALUE,e,l));l.setTimeout(t,function(){if(a)return;let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||rg;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),w(new rr(t,r.clarifyTimeoutError?rr.ETIMEDOUT:rr.ECONNABORTED,e,l))})}if(rt.isStream(p)){let t=!1,r=!1;p.on("end",()=>{t=!0}),p.once("error",e=>{r=!0,l.destroy(e)}),p.on("close",()=>{t||r||w(new rz("Request stream has been aborted",e,l))}),p.pipe(l)}else p&&l.write(p),l.end()},new Promise((e,r)=>{let n,o,i=(e,t)=>{!o&&(o=!0,n&&n(e,t))},s=e=>{i(e,!0),r(e)};t(t=>{i(t),e(t)},s,e=>n=e).catch(s)})},nw=rA.hasStandardBrowserEnv?(n=new URL(rA.origin),o=rA.navigator&&/(msie|trident)/i.test(rA.navigator.userAgent),e=>(e=new URL(e,rA.origin),n.protocol===e.protocol&&n.host===e.host&&(o||n.port===e.port))):()=>!0,nR=rA.hasStandardBrowserEnv?{write(e,t,r,n,o,i,s){if("undefined"==typeof document)return;let a=[`${e}=${encodeURIComponent(t)}`];rt.isNumber(r)&&a.push(`expires=${new Date(r).toUTCString()}`),rt.isString(n)&&a.push(`path=${n}`),rt.isString(o)&&a.push(`domain=${o}`),!0===i&&a.push("secure"),rt.isString(s)&&a.push(`SameSite=${s}`),document.cookie=a.join("; ")},read(e){if("undefined"==typeof document)return null;let t=document.cookie.match(RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}},nT=e=>e instanceof rF?{...e}:e;function nS(e,t){t=t||{};let r={};function n(e,t,r,n){return rt.isPlainObject(e)&&rt.isPlainObject(t)?rt.merge.call({caseless:n},e,t):rt.isPlainObject(t)?rt.merge({},t):rt.isArray(t)?t.slice():t}function o(e,t,r,o){return rt.isUndefined(t)?rt.isUndefined(e)?void 0:n(void 0,e,r,o):n(e,t,r,o)}function i(e,t){if(!rt.isUndefined(t))return n(void 0,t)}function s(e,t){return rt.isUndefined(t)?rt.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function a(r,o,i){return i in t?n(r,o):i in e?n(void 0,r):void 0}let l={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t,r)=>o(nT(e),nT(t),r,!0)};return rt.forEach(Object.keys({...e,...t}),function(n){let i=l[n]||o,s=i(e[n],t[n],n);rt.isUndefined(s)&&i!==a||(r[n]=s)}),r}let nA=e=>{let t=nS({},e),{data:r,withXSRFToken:n,xsrfHeaderName:o,xsrfCookieName:i,headers:s,auth:a}=t;if(t.headers=s=rF.from(s),t.url=rm(rM(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&s.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),rt.isFormData(r)){if(rA.hasStandardBrowserEnv||rA.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(rt.isFunction(r.getHeaders)){let e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,r])=>{t.includes(e.toLowerCase())&&s.set(e,r)})}}if(rA.hasStandardBrowserEnv&&(n&&rt.isFunction(n)&&(n=n(t)),n||!1!==n&&nw(t.url))){let e=o&&i&&nR.read(i);e&&s.set(o,e)}return t},nx="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){let n,o,i,s,a,l=nA(e),u=l.data,c=rF.from(l.headers).normalize(),{responseType:p,onUploadProgress:d,onDownloadProgress:f}=l;function h(){s&&s(),a&&a(),l.cancelToken&&l.cancelToken.unsubscribe(n),l.signal&&l.signal.removeEventListener("abort",n)}let m=new XMLHttpRequest;function y(){if(!m)return;let n=rF.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());rU(function(e){t(e),h()},function(e){r(e),h()},{data:p&&"text"!==p&&"json"!==p?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:n,config:e,request:m}),m=null}m.open(l.method.toUpperCase(),l.url,!0),m.timeout=l.timeout,"onloadend"in m?m.onloadend=y:m.onreadystatechange=function(){!m||4!==m.readyState||(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(y)},m.onabort=function(){m&&(r(new rr("Request aborted",rr.ECONNABORTED,e,m)),m=null)},m.onerror=function(t){let n=new rr(t&&t.message?t.message:"Network Error",rr.ERR_NETWORK,e,m);n.event=t||null,r(n),m=null},m.ontimeout=function(){let t=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded",n=l.transitional||rg;l.timeoutErrorMessage&&(t=l.timeoutErrorMessage),r(new rr(t,n.clarifyTimeoutError?rr.ETIMEDOUT:rr.ECONNABORTED,e,m)),m=null},void 0===u&&c.setContentType(null),"setRequestHeader"in m&&rt.forEach(c.toJSON(),function(e,t){m.setRequestHeader(t,e)}),rt.isUndefined(l.withCredentials)||(m.withCredentials=!!l.withCredentials),p&&"json"!==p&&(m.responseType=l.responseType),f&&([i,a]=nt(f,!0),m.addEventListener("progress",i)),d&&m.upload&&([o,s]=nt(d),m.upload.addEventListener("progress",o),m.upload.addEventListener("loadend",s)),(l.cancelToken||l.signal)&&(n=t=>{m&&(r(!t||t.type?new rz(null,e,m):t),m.abort(),m=null)},l.cancelToken&&l.cancelToken.subscribe(n),l.signal&&(l.signal.aborted?n():l.signal.addEventListener("abort",n)));let g=rW(l.url);g&&-1===rA.protocols.indexOf(g)?r(new rr("Unsupported protocol "+g+":",rr.ERR_BAD_REQUEST,e)):m.send(u||null)})},nO=function*(e,t){let r,n=e.byteLength;if(!t||n<t)return void(yield e);let o=0;for(;o<n;)r=o+t,yield e.slice(o,r),o=r},nC=async function*(e,t){for await(let r of nk(e))yield*nO(r,t)},nk=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);let t=e.getReader();try{for(;;){let{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},nI=(e,t,r,n)=>{let o,i=nC(e,t),s=0,a=e=>{!o&&(o=!0,n&&n(e))};return new ReadableStream({async pull(e){try{let{done:t,value:n}=await i.next();if(t){a(),e.close();return}let o=n.byteLength;if(r){let e=s+=o;r(e)}e.enqueue(new Uint8Array(n))}catch(e){throw a(e),e}},cancel:e=>(a(e),i.return())},{highWaterMark:2})},{isFunction:nP}=rt,nN=(({Request:e,Response:t})=>({Request:e,Response:t}))(rt.global),{ReadableStream:nF,TextEncoder:nL}=rt.global,nj=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},nz=e=>{let t,{fetch:r,Request:n,Response:o}=e=rt.merge.call({skipUndefined:!0},nN,e),i=r?nP(r):"function"==typeof fetch,s=nP(n),a=nP(o);if(!i)return!1;let l=i&&nP(nF),u=i&&("function"==typeof nL?(t=new nL,e=>t.encode(e)):async e=>new Uint8Array(await new n(e).arrayBuffer())),c=s&&l&&nj(()=>{let e=!1,t=new n(rA.origin,{body:new nF,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),p=a&&l&&nj(()=>rt.isReadableStream(new o("").body)),d={stream:p&&(e=>e.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{d[e]||(d[e]=(t,r)=>{let n=t&&t[e];if(n)return n.call(t);throw new rr(`Response type '${e}' is not supported`,rr.ERR_NOT_SUPPORT,r)})});let f=async e=>{if(null==e)return 0;if(rt.isBlob(e))return e.size;if(rt.isSpecCompliantForm(e)){let t=new n(rA.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return rt.isArrayBufferView(e)||rt.isArrayBuffer(e)?e.byteLength:(rt.isURLSearchParams(e)&&(e+=""),rt.isString(e))?(await u(e)).byteLength:void 0},h=async(e,t)=>{let r=rt.toFiniteNumber(e.getContentLength());return null==r?f(t):r};return async e=>{let t,{url:i,method:a,data:l,signal:u,cancelToken:f,timeout:m,onDownloadProgress:y,onUploadProgress:g,responseType:b,headers:_,withCredentials:v="same-origin",fetchOptions:E}=nA(e),w=r||fetch;b=b?(b+"").toLowerCase():"text";let R=((e,t)=>{let{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController,o=function(e){if(!r){r=!0,s();let t=e instanceof Error?e:this.reason;n.abort(t instanceof rr?t:new rz(t instanceof Error?t.message:t))}},i=t&&setTimeout(()=>{i=null,o(new rr(`timeout ${t} of ms exceeded`,rr.ETIMEDOUT))},t),s=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)}),e=null)};e.forEach(e=>e.addEventListener("abort",o));let{signal:a}=n;return a.unsubscribe=()=>rt.asap(s),a}})([u,f&&f.toAbortSignal()],m),T=null,S=R&&R.unsubscribe&&(()=>{R.unsubscribe()});try{if(g&&c&&"get"!==a&&"head"!==a&&0!==(t=await h(_,l))){let e,r=new n(i,{method:"POST",body:l,duplex:"half"});if(rt.isFormData(l)&&(e=r.headers.get("content-type"))&&_.setContentType(e),r.body){let[e,n]=nr(t,nt(nn(g)));l=nI(r.body,65536,e,n)}}rt.isString(v)||(v=v?"include":"omit");let r=s&&"credentials"in n.prototype,u={...E,signal:R,method:a.toUpperCase(),headers:_.normalize().toJSON(),body:l,duplex:"half",credentials:r?v:void 0};T=s&&new n(i,u);let f=await (s?w(T,E):w(i,u)),m=p&&("stream"===b||"response"===b);if(p&&(y||m&&S)){let e={};["status","statusText","headers"].forEach(t=>{e[t]=f[t]});let t=rt.toFiniteNumber(f.headers.get("content-length")),[r,n]=y&&nr(t,nt(nn(y),!0))||[];f=new o(nI(f.body,65536,r,()=>{n&&n(),S&&S()}),e)}b=b||"text";let A=await d[rt.findKey(d,b)||"text"](f,e);return!m&&S&&S(),await new Promise((t,r)=>{rU(t,r,{data:A,headers:rF.from(f.headers),status:f.status,statusText:f.statusText,config:e,request:T})})}catch(t){if(S&&S(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message))throw Object.assign(new rr("Network Error",rr.ERR_NETWORK,e,T),{cause:t.cause||t});throw rr.from(t,t&&t.code,e,T)}}},nD=new Map,nU=e=>{let t=e&&e.env||{},{fetch:r,Request:n,Response:o}=t,i=[n,o,r],s=i.length,a,l,u=nD;for(;s--;)a=i[s],void 0===(l=u.get(a))&&u.set(a,l=s?new Map:nz(t)),u=l;return l};nU();let nM={http:nE,xhr:nx,fetch:{get:nU}};rt.forEach(nM,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});let nB=e=>`- ${e}`,n$=e=>rt.isFunction(e)||null===e||!1===e,nq=function(e,t){let r,n,{length:o}=e=rt.isArray(e)?e:[e],i={};for(let s=0;s<o;s++){let o;if(n=r=e[s],!n$(r)&&void 0===(n=nM[(o=String(r)).toLowerCase()]))throw new rr(`Unknown adapter '${o}'`);if(n&&(rt.isFunction(n)||(n=n.get(t))))break;i[o||"#"+s]=n}if(!n){let e=Object.entries(i).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new rr("There is no suitable adapter to dispatch the request "+(o?e.length>1?"since :\n"+e.map(nB).join("\n"):" "+nB(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n};function nH(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new rz(null,e)}function nV(e){return nH(e),e.headers=rF.from(e.headers),e.data=rL.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),nq(e.adapter||rO.adapter,e)(e).then(function(t){return nH(e),t.data=rL.call(e,e.transformResponse,t),t.headers=rF.from(t.headers),t},function(t){return!rj(t)&&(nH(e),t&&t.response&&(t.response.data=rL.call(e,e.transformResponse,t.response),t.response.headers=rF.from(t.response.headers))),Promise.reject(t)})}let nG={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{nG[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});let nK={};nG.transitional=function(e,t,r){function n(e,t){return"[Axios v"+rK+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,o,i)=>{if(!1===e)throw new rr(n(o," has been removed"+(t?" in "+t:"")),rr.ERR_DEPRECATED);return t&&!nK[o]&&(nK[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,o,i)}},nG.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};let nW=function(e,t,r){if("object"!=typeof e)throw new rr("options must be an object",rr.ERR_BAD_OPTION_VALUE);let n=Object.keys(e),o=n.length;for(;o-- >0;){let i=n[o],s=t[i];if(s){let t=e[i],r=void 0===t||s(t,i,e);if(!0!==r)throw new rr("option "+i+" must be "+r,rr.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new rr("Unknown option "+i,rr.ERR_BAD_OPTION)}};class nY{constructor(e){this.defaults=e||{},this.interceptors={request:new ry,response:new ry}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=Error();let r=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+r):e.stack=r}catch(e){}}throw e}}_request(e,t){let r,n;"string"==typeof e?(t=t||{}).url=e:t=e||{};let{transitional:o,paramsSerializer:i,headers:s}=t=nS(this.defaults,t);void 0!==o&&nW(o,{silentJSONParsing:nG.transitional(nG.boolean),forcedJSONParsing:nG.transitional(nG.boolean),clarifyTimeoutError:nG.transitional(nG.boolean)},!1),null!=i&&(rt.isFunction(i)?t.paramsSerializer={serialize:i}:nW(i,{encode:nG.function,serialize:nG.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),nW(t,{baseUrl:nG.spelling("baseURL"),withXsrfToken:nG.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&rt.merge(s.common,s[t.method]);s&&rt.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=rF.concat(a,s);let l=[],u=!0;this.interceptors.request.forEach(function(e){("function"!=typeof e.runWhen||!1!==e.runWhen(t))&&(u=u&&e.synchronous,l.unshift(e.fulfilled,e.rejected))});let c=[];this.interceptors.response.forEach(function(e){c.push(e.fulfilled,e.rejected)});let p=0;if(!u){let e=[nV.bind(this),void 0];for(e.unshift(...l),e.push(...c),n=e.length,r=Promise.resolve(t);p<n;)r=r.then(e[p++],e[p++]);return r}n=l.length;let d=t;for(;p<n;){let e=l[p++],t=l[p++];try{d=e(d)}catch(e){t.call(this,e);break}}try{r=nV.call(this,d)}catch(e){return Promise.reject(e)}for(p=0,n=c.length;p<n;)r=r.then(c[p++],c[p++]);return r}getUri(e){return rm(rM((e=nS(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}rt.forEach(["delete","get","head","options"],function(e){nY.prototype[e]=function(t,r){return this.request(nS(r||{},{method:e,url:t,data:(r||{}).data}))}}),rt.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,o){return this.request(nS(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}nY.prototype[e]=t(),nY.prototype[e+"Form"]=t(!0)});class nJ{constructor(e){let t;if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t,n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,o){r.reason||(r.reason=new rz(e,n,o),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){let e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new nJ(function(t){e=t}),cancel:e}}}let nX={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(nX).forEach(([e,t])=>{nX[t]=e});let nQ=function e(t){let r=new nY(t),n=tx(nY.prototype.request,r);return rt.extend(n,nY.prototype,r,{allOwnKeys:!0}),rt.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(nS(t,r))},n}(rO);nQ.Axios=nY,nQ.CanceledError=rz,nQ.CancelToken=nJ,nQ.isCancel=rj,nQ.VERSION=rK,nQ.toFormData=rc,nQ.AxiosError=rr,nQ.Cancel=nQ.CanceledError,nQ.all=function(e){return Promise.all(e)},nQ.spread=function(e){return function(t){return e.apply(null,t)}},nQ.isAxiosError=function(e){return rt.isObject(e)&&!0===e.isAxiosError},nQ.mergeConfig=nS,nQ.AxiosHeaders=rF,nQ.formToJSON=e=>rx(rt.isHTMLForm(e)?new FormData(e):e),nQ.getAdapter=nq,nQ.HttpStatusCode=nX,nQ.default=nQ;let{Axios:nZ,AxiosError:n0,CanceledError:n1,isCancel:n2,CancelToken:n3,VERSION:n4,all:n6,Cancel:n5,isAxiosError:n9,spread:n7,toFormData:n8,AxiosHeaders:oe,HttpStatusCode:ot,formToJSON:or,getAdapter:on,mergeConfig:oo}=nQ;class oi extends Error{constructor(e){super(e),this.name="SignerError",Object.setPrototypeOf(this,oi.prototype)}}var os=((u={})[u.OPTIMISTIC=1]="OPTIMISTIC",u[u.API=2]="API",u);class oa{static USDC_TICKER_SCALE=1e6;static TX_TYPE_CHANGE_PUB_KEY=8;static TX_TYPE_CREATE_SUB_ACCOUNT=9;static TX_TYPE_CREATE_PUBLIC_POOL=10;static TX_TYPE_UPDATE_PUBLIC_POOL=11;static TX_TYPE_TRANSFER=12;static TX_TYPE_WITHDRAW=13;static TX_TYPE_CREATE_ORDER=14;static TX_TYPE_CANCEL_ORDER=15;static TX_TYPE_CANCEL_ALL_ORDERS=16;static TX_TYPE_MODIFY_ORDER=17;static TX_TYPE_MINT_SHARES=18;static TX_TYPE_BURN_SHARES=19;static TX_TYPE_UPDATE_LEVERAGE=20;static ORDER_TYPE_LIMIT=0;static ORDER_TYPE_MARKET=1;static ORDER_TYPE_STOP_LOSS=2;static ORDER_TYPE_STOP_LOSS_LIMIT=3;static ORDER_TYPE_TAKE_PROFIT=4;static ORDER_TYPE_TAKE_PROFIT_LIMIT=5;static ORDER_TYPE_TWAP=6;static ORDER_TIME_IN_FORCE_IMMEDIATE_OR_CANCEL=0;static ORDER_TIME_IN_FORCE_GOOD_TILL_TIME=1;static ORDER_TIME_IN_FORCE_POST_ONLY=2;static CANCEL_ALL_TIF_IMMEDIATE=0;static CANCEL_ALL_TIF_SCHEDULED=1;static CANCEL_ALL_TIF_ABORT=2;static NIL_TRIGGER_PRICE=0;static DEFAULT_28_DAY_ORDER_EXPIRY=-1;static DEFAULT_IOC_EXPIRY=0;static DEFAULT_10_MIN_AUTH_EXPIRY=-1;static MINUTE=60;static CROSS_MARGIN_MODE=0;static ISOLATED_MARGIN_MODE=1;constructor(){throw new oi("SignerClient stub should not be instantiated")}static async create(e){throw new oi("SignerClient stub cannot be created - this should only run with Bun runtime")}async createOrder(e){throw new oi("SignerClient stub cannot create orders")}async cancelOrder(e,t){throw new oi("SignerClient stub cannot cancel orders")}async sendTx(e,t){throw new oi("SignerClient stub cannot send transactions")}signCreateOrder(){throw new oi("SignerClient stub cannot sign orders")}signCancelAllOrders(){throw new oi("SignerClient stub cannot sign cancel all orders")}signCancelOrder(){throw new oi("SignerClient stub cannot sign cancel orders")}getNonceManager(){}}e.i(608808);var ol=e.i(972172),ou=e.i(218936),oc=e.i(798003),op=e.i(836944),od=e.i(798783),of=e.i(188241);async function oh(e,t){if(!t||0===t.length)return[];if(oc.IS_SIMULATION_ENABLED){let r=await of.ExchangeSimulator.bootstrap(oc.DEFAULT_SIMULATOR_OPTIONS),n=e.id||"default",o=[];for(let{symbol:e,side:i,quantity:s,leverage:a}of t){if("HOLD"===i){o.push({symbol:e,side:i,quantity:s,leverage:a,success:!0});continue}let t="LONG"===i?"buy":"sell",l=Math.abs(s);try{let u=await r.placeOrder({symbol:e,side:t,quantity:l,type:"market",leverage:a??void 0},n);"rejected"===u.status||0===u.totalQuantity?o.push({symbol:e,side:i,quantity:s,leverage:a,success:!1,error:u.reason??"Order rejected"}):o.push({symbol:e,side:i,quantity:s,leverage:a,success:!0})}catch(r){let t=r instanceof Error?r.message:"Unknown error";o.push({symbol:e,side:i,quantity:s,leverage:a,success:!1,error:t})}}return o}let r=await oa.create({url:oc.BASE_URL,privateKey:e.apiKey,apiKeyIndex:oc.API_KEY_INDEX,accountIndex:Number(e.accountIndex),nonceManagementType:os.API}),n=new od.CandlestickApi({baseServer:new ou.ServerConfiguration(oc.BASE_URL,{}),httpApi:new ol.IsomorphicFetchHttpLibrary,middleware:[],authMethods:{}}),o=[];for(let{symbol:e,side:i,quantity:s,leverage:a}of t)try{let t=op.MARKETS[e];if(!t){console.warn(`Market for symbol ${e} not found, skipping`),o.push({symbol:e,side:i,quantity:s,leverage:a,success:!1,error:"Market not found"});continue}if("HOLD"===i){console.log(`Side is HOLD for ${e}, skipping`),o.push({symbol:e,side:i,quantity:s,leverage:a,success:!0});continue}let l=await n.candlesticks(t.marketId,"1m",Date.now()-3e5,Date.now(),1,!1),u=l?.candlesticks?.[l.candlesticks.length-1]?.close;if(!u){console.warn(`No latest price found for ${e}, skipping`),o.push({symbol:e,side:i,quantity:s,leverage:a,success:!1,error:"No latest price available"});continue}let c="LONG"===i,p=Math.abs(s),d=await r.createOrder({marketIndex:t.marketId,clientOrderIndex:t.clientOrderIndex,baseAmount:Math.round(p*t.qtyDecimals),price:Math.round((c?1.01*u:.99*u)*t.priceDecimals),isAsk:!c,orderType:oa.ORDER_TYPE_MARKET,timeInForce:oa.ORDER_TIME_IN_FORCE_IMMEDIATE_OR_CANCEL,reduceOnly:0,triggerPrice:oa.NIL_TRIGGER_PRICE,orderExpiry:oa.DEFAULT_IOC_EXPIRY});console.log(`Position created for ${e}:`,d),o.push({symbol:e,side:i,quantity:s,leverage:a,success:!0})}catch(r){let t=r instanceof Error?r.message:String(r);console.error(`Failed to create position for ${e}:`,r),o.push({symbol:e,side:i,quantity:s,leverage:a,success:!1,error:t})}return o}let om=e=>e?e.toUpperCase().replace(/[^A-Z0-9]/g,"").replace(/USDT$/,""):"",oy=e=>{if(null==e)return null;if("number"==typeof e)return Number.isFinite(e)?e:null;if("string"==typeof e&&e.length>0){let t=Number.parseFloat(e);return Number.isFinite(t)?t:null}return null},og=(e,t,r,n)=>{if(!t)return null;let o=t.quantity??oy(t.position),i=null!=o?Math.abs(o):null,s=t.entryPrice??t.markPrice??null,a=t.markPrice??s,l=r??a??s??null,u=oy(t.realizedPnl),c=oy(t.unrealizedPnl),p=null;return null!=s&&null!=l&&null!=i?p=("LONG"===t.sign?l-s:s-l)*i:(null!=u||null!=c)&&(p=(u??0)+(c??0)),{symbol:e,side:t.sign,quantity:i,entryPrice:s,exitPrice:l,markPrice:a,entryNotional:null!=s&&null!=i?s*i:null,exitNotional:null!=l&&null!=i?l*i:null,netPnl:p,realizedPnl:u,unrealizedPnl:c,closedAt:n}};async function ob(e,t){if(!t||0===t.length)return[];let r=new Date().toISOString(),n=await (0,tT.getOpenPositions)(e.apiKey,e.accountIndex,e.id||"default"),o=new Map;for(let e of n??[])o.set(om(e.symbol),e);if(oc.IS_SIMULATION_ENABLED){let n=await of.ExchangeSimulator.bootstrap(oc.DEFAULT_SIMULATOR_OPTIONS),i=e.id||"default",s=await n.closePositions(t,i),a=[];for(let e of t){let t=om(e),n=o.get(t),i=s[e]??s[t],l=og(e,n,i&&i.averagePrice&&i.averagePrice>0?i.averagePrice:null,r);l&&a.push(l)}return a}let i=await oa.create({url:oc.BASE_URL,privateKey:e.apiKey,apiKeyIndex:oc.API_KEY_INDEX,accountIndex:Number(e.accountIndex),nonceManagementType:os.API}),s=new od.CandlestickApi({baseServer:new ou.ServerConfiguration(oc.BASE_URL,{}),httpApi:new ol.IsomorphicFetchHttpLibrary,middleware:[],authMethods:{}}),a=[];for(let e of t){let t=om(e),n=o.get(t);if(!n){console.warn(`No open position found for ${e}, skipping close request`);continue}let l=op.MARKETS[e];if(!l){console.warn(`Market for symbol ${e} not found, skipping`);continue}try{let t=await s.candlesticks(l.marketId,"1m",Date.now()-3e5,Date.now(),1,!1),o=t?.candlesticks?.[t.candlesticks.length-1]?.close;if(!o){console.warn(`No latest price found for ${e}, skipping close request`);continue}let u="LONG"===n.sign?"SHORT":"LONG",c=n.quantity??oy(n.position)??0;await i.createOrder({marketIndex:l.marketId,clientOrderIndex:l.clientOrderIndex,baseAmount:Math.abs(c)*l.qtyDecimals,price:("LONG"===u?1.01*o:.99*o)*l.priceDecimals,isAsk:"LONG"!==u,orderType:oa.ORDER_TYPE_MARKET,timeInForce:oa.ORDER_TIME_IN_FORCE_IMMEDIATE_OR_CANCEL,reduceOnly:0,triggerPrice:oa.NIL_TRIGGER_PRICE,orderExpiry:oa.DEFAULT_IOC_EXPIRY});let p=og(e,n,o,r);p&&a.push(p)}catch(t){console.error(`Failed to close position for ${e}:`,t)}}return a}var o_=e.i(457077),ov=e.i(570034),oE=e.i(543155);function ow(e,t){if(e.length<t)throw Error("Not enough prices provided");let r=2/(t+1),n=0;for(let r=0;r<t;r++)n+=e[r]??0;let o=[n/=t];for(let n=t;n<e.length;n++){let t=(o[o.length-1]??0)*(1-r)+(e[n]??0)*r;o.push(t)}return o}function oR(e,t){if(e.length<t+1)throw Error("Not enough prices provided for RSI");let r=0,n=0;for(let o=1;o<=t;o++){let t=(e[o]??0)-(e[o-1]??0);t>=0?r+=t:n-=t}let o=r/t,i=n/t,s=[],a=()=>0===i?0===o?50:100:100-100/(1+o/i);s.push(a());for(let r=t+1;r<e.length;r++){let n=(e[r]??0)-(e[r-1]??0),l=Math.max(n,0),u=Math.max(-n,0);o=(o*(t-1)+l)/t,i=(i*(t-1)+u)/t,s.push(a())}return s}function oT(e,t){if(e.length<t)throw Error("Not enough candlesticks provided for ATR");let r=[];for(let t=0;t<e.length;t++){let n=e[t],o=t>0?e[t-1]?.close??n.close:n.close,i=n.high-n.low,s=Math.abs(n.high-o),a=Math.abs(n.low-o);r.push(Math.max(i,s,a))}let n=r.slice(0,t).reduce((e,t)=>e+t,0)/t,o=[n];for(let e=t;e<r.length;e++)o.push(n=(n*(t-1)+r[e])/t);return o}let oS=(e,t=3)=>e.map(e=>Number(e.toFixed(t))),oA=(e,t=3)=>Number.isFinite(e??NaN)?Number(e.toFixed(t)):null,ox=new ou.ServerConfiguration(oc.BASE_URL,{}),oO=new ol.IsomorphicFetchHttpLibrary,oC=new od.CandlestickApi({baseServer:ox,httpApi:oO,middleware:[],authMethods:{}}),ok=new o_.FundingApi({baseServer:ox,httpApi:oO,middleware:[],authMethods:{}}),oI=new oE.OrderApi({baseServer:ox,httpApi:oO,middleware:[],authMethods:{}}),oP=e=>{if(!e)return"";let t=e.toUpperCase();return t.endsWith("USDT")?t.slice(0,-4):t},oN=e=>{try{return e()}catch(e){return console.warn("Indicator computation failed",e),[]}},oF=(e,t)=>{let r=e.map(e=>e.close),n=e.map(({open:e,close:t})=>(e+t)/2),o=e.map(e=>e.volume0??0),i=oN(()=>ow(n,20)),s=oN(()=>{let e;return e=ow(n,26),ow(n,12).slice(-e.length).map((t,r)=>(t??0)-(e[r]??0))}),a=oN(()=>oR(r,7)),l=oN(()=>oR(r,14)),u=oN(()=>oT(e,10)),c=oN(()=>oT(e,14));return{timeframe:t,timestamps:e.slice(-10).map(e=>new Date(e.timestamp).toISOString()),midPrices:oS(n.slice(-10)),ema20:oS(i.slice(-10)),macd:oS(s.slice(-10)),rsi7:oS(a.slice(-10)),rsi14:oS(l.slice(-10)),atr10:oS(u.slice(-10)),atr14:oS(c.slice(-10)),volumes:oS(o.slice(-10))}},oL=async(e,t)=>{let r=Date.now(),n="5m"===t?54e6:1296e6;return(await oC.candlesticks(e,t,r-n,r,"5m"===t?180:90,!1)).candlesticks??[]},oj=async()=>{try{let e=await ok.fundingRates(),t=new Map;for(let r of e.fundingRates??[]){let e=oP(r.symbol);if(!e)continue;let n=t.get(e),o=r.exchange===ov.FundingRateExchangeEnum.Lighter;(void 0===n||o)&&t.set(e,r.rate)}return t}catch(e){return console.error("Failed to fetch funding rates",e),new Map}},oz=async()=>{try{let e=await oI.orderBookDetails(),t=new Map;for(let r of e.orderBookDetails??[]){let e=oP(r.symbol);e&&t.set(e,r)}return t}catch(e){return console.error("Failed to fetch order book details",e),new Map}},oD=e=>{if(!e?.dailyChart)return e?.openInterest??null;let t=Object.values(e.dailyChart).filter(e=>Number.isFinite(e));return t.length?t.reduce((e,t)=>e+t,0)/t.length:e?.openInterest??null},oU=(e,t)=>{let r,n,o,i=e.midPrices.at(-1)??t.midPrices.at(-1)??null,s=e.ema20.at(-1)??t.ema20.at(-1)??null,a=e.macd.at(-1)??t.macd.at(-1)??null,l=e.rsi7.at(-1)??t.rsi7.at(-1)??null,u=e.rsi14.at(-1)??t.rsi14.at(-1)??null,c=e.atr10.at(-1)??t.atr10.at(-1)??null,p=e.atr14.at(-1)??t.atr14.at(-1)??null;return{price:i,ema20:s,macd:a,rsi7:l,rsi14:u,atr10:c,atr14:p,volume:e.volumes.at(-1)??null,averageVolume:0===(o=(r=e.volumes,n=Math.min(30,e.volumes.length),r.slice(-n)).filter(e=>Number.isFinite(e))).length?null:o.reduce((e,t)=>e+t,0)/o.length}};async function oM(e){let[t,r]=await Promise.all([oj(),oz()]),n=[];for(let o of e){let[e,i]=await Promise.all([oL(o.marketId,"5m"),oL(o.marketId,"4h")]),s=oF(e,"5m"),a=oF(i,"4h"),l=oU(s,a),u=r.get(o.symbol);n.push({symbol:o.symbol,marketId:o.marketId,latest:{price:oA(l.price),ema20:oA(l.ema20),macd:oA(l.macd),rsi7:oA(l.rsi7),rsi14:oA(l.rsi14),atr10:oA(l.atr10),atr14:oA(l.atr14),volume:oA(l.volume,2),averageVolume:oA(l.averageVolume,2)},fundingRate:oA(t.get(o.symbol)??null,6),openInterest:{latest:oA(u?.openInterest??null,2),average:oA(oD(u),2)},liquidity:{dailyBaseVolume:oA(u?.dailyBaseTokenVolume??null,2),dailyQuoteVolume:oA(u?.dailyQuoteTokenVolume??null,2),dailyPriceChange:oA(u?.dailyPriceChange??null,4)},series:{intraday:s,higherTimeframe:a}})}return n}let oB=(e,t=3)=>Number.isFinite(e??NaN)?e.toFixed(t):"N/A",o$=(e,t)=>0===t.length?`${e}: []`:`${e}: [${t.map(e=>e.toFixed(3)).join(", ")}]`;var oq=e.i(476591),oH=e.i(288840),oV=e.i(749124);let oG=new tS.PrismaClient;async function oK(e){try{let t=await oG.toolCalls.findMany({where:{toolCallType:tA,invocation:{modelId:e}},orderBy:{createdAt:"desc"},take:100});return(0,oq.buildDecisionIndex)(t.map(e=>({id:e.id,createdAt:e.createdAt,toolCallType:e.toolCallType,metadata:(0,oH.safeJsonParse)(e.metadata,{})})))}catch(t){return console.error(`Failed to build decision index for model ${e}`,t),new Map}}let oW=e=>{if("number"==typeof e.quantity&&Number.isFinite(e.quantity))return Math.abs(e.quantity);if("string"==typeof e.position){let t=Number.parseFloat(e.position);if(Number.isFinite(t))return Math.abs(t)}return null};async function oY(e,t){let r=await oG.portfolioSize.findMany({where:{modelId:e.id},orderBy:{createdAt:"asc"}});if(r.length<2)return{sharpeRatio:"N/A (need more data)",totalReturnPercent:"N/A"};let n=parseFloat(r[0].netPortfolio)||1e4,o=(t-n)/n*100,i=[];for(let e=1;e<r.length;e++){let t=parseFloat(r[e-1].netPortfolio),n=parseFloat(r[e].netPortfolio);t>0&&i.push((n-t)/t)}if(i.length<2)return{sharpeRatio:"N/A (need more data)",totalReturnPercent:`${o.toFixed(2)}%`};let s=i.reduce((e,t)=>e+t,0)/i.length,a=Math.sqrt(i.reduce((e,t)=>e+(t-s)**2,0)/(i.length-1));if(0===a||i.length<30)return{sharpeRatio:"N/A (insufficient data)",totalReturnPercent:`${o.toFixed(2)}%`};let l=Math.pow(1+s,105120)-1,u=a*Math.sqrt(105120);return u<1e-4?{sharpeRatio:"N/A (low volatility)",totalReturnPercent:`${o.toFixed(2)}%`}:{sharpeRatio:((l-.04)/u).toFixed(3),totalReturnPercent:`${o.toFixed(2)}%`}}async function oJ(e){var t,r,n;let o,i,[s,a,l]=await Promise.all([(0,tR.getPortfolio)(e),(0,tT.getOpenPositions)(e.apiKey,e.accountIndex,e.id),e.id?oK(e.id):Promise.resolve(new Map)]),u=a.map(e=>{var t;let r,n,o,i=e.symbol?.toUpperCase?.()??e.symbol,s=i?l.get(i):void 0,a=(t=e.exitPlan??null,r=s?.profitTarget??t?.target??null,n=s?.stopLoss??t?.stop??null,o=s?.invalidationCondition??t?.invalidation??null,null===r&&null===n&&null===o?null:{target:r,stop:n,invalidation:o}),u=(e=>{let t=e.notional;if("number"==typeof t||"string"==typeof t){let e=oZ(t);if(null!==e)return Math.abs(e)}let r=oW(e),n=oZ(e.entryPrice??e.markPrice??e.liquidationPrice??null);return null!==r&&null!==n?Math.abs(r*n):null})(e),{riskUsd:c,riskPercent:p,rewardUsd:d,rewardPercent:f,riskRewardRatio:h}=((e,t,r)=>{let n=oW(e),o=e.entryPrice??e.markPrice??null,i=t?.stop??null,s=t?.target??null,a=null,l=null;if(null!==n&&null!==o&&null!==i){let t="LONG"===e.sign?o-i:i-o;t>0&&(a=t*n,r&&r>0&&(l=a/r*100))}let u=null,c=null;if(null!==n&&null!==o&&null!==s){let t="LONG"===e.sign?s-o:o-s;t>0&&(u=t*n,r&&r>0&&(c=u/r*100))}let p=null!==a&&null!==u&&a>0?u/a:null;return{riskUsd:a,riskPercent:l,rewardUsd:u,rewardPercent:c,riskRewardRatio:p}})(e,a,u);return{...e,exitPlan:a,confidence:s?.confidence??e.confidence??null,signal:s?.signal??e.signal??e.sign,lastDecisionAt:s?.createdAt?.toISOString?.()??e.lastDecisionAt??null,decisionStatus:(s?s.status?s.status:s.result?.success===!0?"FILLED":s.result?.success===!1?"REJECTED":null:null)??e.decisionStatus??null,notionalUsd:u,riskUsd:c,riskPercent:p,rewardUsd:d,rewardPercent:f,riskRewardRatio:h}}),c=[],p=[],d=[],f=Object.entries(op.MARKETS).map(([e,t])=>({symbol:e,marketId:t.marketId})),h="Market data unavailable.";try{h=(t=await oM(f)).length?t.map(e=>{let t=[];return t.push(`### ${e.symbol} MARKET DATA`),t.push(`current_price = ${oB(e.latest.price)}, current_ema20 = ${oB(e.latest.ema20)}, current_macd = ${oB(e.latest.macd)}, current_rsi_7 = ${oB(e.latest.rsi7)}, current_rsi_14 = ${oB(e.latest.rsi14)}`),t.push(`current_atr_10 = ${oB(e.latest.atr10)}, current_atr_14 = ${oB(e.latest.atr14)}, current_volume = ${oB(e.latest.volume,2)} vs. average_volume = ${oB(e.latest.averageVolume,2)}`),t.push(`funding_rate = ${oB(e.fundingRate,6)}, open_interest_latest = ${oB(e.openInterest.latest,2)}, open_interest_average = ${oB(e.openInterest.average,2)}`),(null!=e.liquidity.dailyQuoteVolume||null!=e.liquidity.dailyBaseVolume)&&t.push(`daily_volume_quote = ${oB(e.liquidity.dailyQuoteVolume,2)}, daily_volume_base = ${oB(e.liquidity.dailyBaseVolume,2)}, daily_price_change = ${oB(e.liquidity.dailyPriceChange,4)}`),t.push("**Intraday (5m, oldest  newest)**"),t.push(o$("Mid prices",e.series.intraday.midPrices)),t.push(o$("EMA20",e.series.intraday.ema20)),t.push(o$("MACD",e.series.intraday.macd)),t.push(o$("RSI (7)",e.series.intraday.rsi7)),t.push(o$("RSI (14)",e.series.intraday.rsi14)),t.push(o$("ATR (10)",e.series.intraday.atr10)),t.push(o$("ATR (14)",e.series.intraday.atr14)),t.push(o$("Volumes",e.series.intraday.volumes)),t.push("**Higher timeframe (4h, oldest  newest)**"),t.push(o$("Mid prices",e.series.higherTimeframe.midPrices)),t.push(o$("EMA20",e.series.higherTimeframe.ema20)),t.push(o$("MACD",e.series.higherTimeframe.macd)),t.push(o$("RSI (7)",e.series.higherTimeframe.rsi7)),t.push(o$("RSI (14)",e.series.higherTimeframe.rsi14)),t.push(o$("ATR (10)",e.series.higherTimeframe.atr10)),t.push(o$("ATR (14)",e.series.higherTimeframe.atr14)),t.push(o$("Volumes",e.series.higherTimeframe.volumes)),t.join("\n")}).join("\n\n"):"No market data available"}catch(e){console.error("Failed to assemble market intelligence",e)}let m=new Date().toLocaleString("en-US",{timeZone:"UTC"}),y=await oG.invocations.create({data:{modelId:e.id,response:""}});await oG.portfolioSize.create({data:{modelId:e.id,netPortfolio:s.total}}),await (0,oV.revalidateDataTags)(oV.DATA_CACHE_TAGS.PORTFOLIO_HISTORY);let g=parseFloat(s.total),b=await oY(e,g),_=tw.replace("{{INVOKATION_TIMES}}",e.invocationCount.toString()).replace("{{CURRENT_TIME}}",m).replace("{{TOTAL_MINUTES}}",e.totalMinutes.toString()).replace("{{MARKET_INTELLIGENCE}}",h).replace("{{ACCOUNT_SNAPSHOT}}",(o=(r=s).totalValue>0?1-r.availableCash/r.totalValue:null,i=[`total_portfolio_value: ${o0(r.totalValue)}`,`available_cash: ${o0(r.availableCash)}`],null!==o&&i.push(`cash_utilization_pct: ${(100*o).toFixed(2)}%`),i.join("\n"))).replace("{{OPEN_POSITIONS_TABLE}}",(n=u).length?n.map(e=>{var t,r;let n=null!=e.leverage?`${e.leverage.toFixed(2)}x`:"n/a",o=`symbol ${e.symbol} | side ${e.sign} | qty ${o1(e.quantity,4)} | notional ${o0(e.notionalUsd,2)} | entry ${o1(e.entryPrice,2)} | mark ${o1(e.markPrice,2)} | liquidation ${o1(e.liquidationPrice,2)} | unrealized ${o0(e.unrealizedPnl,2)} | realized ${o0(e.realizedPnl,2)} | leverage ${n}`,i=[`risk_usd ${o0(e.riskUsd,2)}`,`risk_pct ${o2(e.riskPercent,2)}`];null!==e.rewardUsd&&i.push(`reward_usd ${o0(e.rewardUsd,2)}`),null!==e.rewardPercent&&i.push(`reward_pct ${o2(e.rewardPercent,2)}`),null!==e.riskRewardRatio&&i.push(`rr_ratio ${e.riskRewardRatio.toFixed(2)}`);let s=`exit_plan: target ${o1(e.exitPlan?.target,2)} | stop ${o1(e.exitPlan?.stop,2)} | invalidation ${e.exitPlan?.invalidation??"N/A"}`,a=`intent: signal ${e.signal??e.sign} | confidence ${null==(t=e.confidence)||!Number.isFinite(t)?"N/A":`${(t<=1?100*t:t).toFixed(1)}%`} | decision_status ${e.decisionStatus??"N/A"} | last_decision_at ${!(r=e.lastDecisionAt)?"N/A":r}`;return[o,i.join(" | "),s,a].join("\n")}).join("\n\n"):"No open positions. Capital fully in cash.").replace("{{PERFORMANCE_OVERVIEW}}",function({account:e,portfolio:t,performanceMetrics:r,openPositions:n}){let o=n.reduce((e,t)=>{let r=oW(t)??Math.abs(t.quantity??0),n=t.notionalUsd??(null!=t.entryPrice&&r>0?Math.abs(t.entryPrice*r):null)??(null!=t.markPrice&&r>0?Math.abs(t.markPrice*r):null),o=oZ(t.unrealizedPnl)??0,i=oZ(t.realizedPnl)??0;if(null!=n&&(e.totalNotional+=n,"LONG"===t.sign?e.longExposure+=n:e.shortExposure+=n),e.totalUnrealized+=o,e.totalRealized+=i,null!=t.riskUsd){let r=Math.max(t.riskUsd,0);e.totalRiskUsd+=r,e.maxPositionRiskUsd=Math.max(e.maxPositionRiskUsd,r)}return e},{totalNotional:0,longExposure:0,shortExposure:0,totalUnrealized:0,totalRealized:0,totalRiskUsd:0,maxPositionRiskUsd:0}),i=o.longExposure-o.shortExposure,s=t.totalValue>0?o.totalNotional/t.totalValue*100:null,a=t.totalValue>0&&o.totalRiskUsd>0?o.totalRiskUsd/t.totalValue*100:null,l=t.totalValue>0&&o.maxPositionRiskUsd>0?o.maxPositionRiskUsd/t.totalValue*100:null,u=["scheduled_interval_minutes: 5",`invocations_completed: ${e.invocationCount}`,`elapsed_minutes: ${e.totalMinutes}`,`portfolio_value: ${o0(t.totalValue)}`,`available_cash: ${o0(t.availableCash)}`,`open_positions: ${n.length}`,`total_notional_exposure: ${o0(o.totalNotional)}`,`long_exposure: ${o0(o.longExposure)}`,`short_exposure: ${o0(o.shortExposure)}`,`net_exposure: ${o0(i)}`,`unrealized_pnl: ${o0(o.totalUnrealized)}`,`realized_pnl: ${o0(o.totalRealized)}`,`gross_risk_usd: ${o0(o.totalRiskUsd)}`,`max_single_position_risk_usd: ${o0(o.maxPositionRiskUsd)}`,`annualized_sharpe_ratio: ${r.sharpeRatio}`,`total_return_since_start: ${r.totalReturnPercent}`];return null!==s&&Number.isFinite(s)&&u.splice(6,0,`exposure_to_equity_pct: ${s.toFixed(2)}%`),null!==a&&Number.isFinite(a)&&u.push(`risk_to_equity_pct: ${a.toFixed(2)}%`),null!==l&&Number.isFinite(l)&&u.push(`max_position_risk_pct: ${l.toFixed(2)}%`),u.join("\n")}({account:e,portfolio:s,performanceMetrics:b,openPositions:u}));console.log("Enriched Prompt:",_);let v=Object.keys(op.MARKETS),E=tb({apiKey:process.env.OPENROUTER_API_KEY}),w=tE.object({symbol:tE.enum(Object.keys(op.MARKETS)).describe("The symbol to open the position at"),side:tE.enum(["LONG","SHORT","HOLD"]).describe("Trading signal: LONG, SHORT, or HOLD"),quantity:tE.number().describe("Signed quantity for the decision."),leverage:tE.number(),profit_target:tE.number(),stop_loss:tE.number(),invalidation_condition:tE.string().describe("Condition under which the position should be invalidated"),confidence:tE.number()}),R=await (0,t_.generateText)({model:E(e.modelName),prompt:_,tools:{createPosition:(0,tv.tool)({description:"Open one or more positions in the given markets",inputSchema:tE.object({decisions:tE.array(w)}).superRefine((e,t)=>{e.decisions||t.addIssue({code:tE.ZodIssueCode.custom,message:"Provide a decisions array with trading instructions."})}),execute:async({decisions:t})=>{let r=t?.map(e=>({symbol:e.symbol.toUpperCase(),side:"SHORT"===e.side||"LONG"===e.side?e.side:"HOLD"===e.side?"HOLD":e.side,quantity:e.quantity,leverage:e.leverage??null,profitTarget:e.profit_target??null,stopLoss:e.stop_loss??null,invalidationCondition:e.invalidation_condition??null,confidence:e.confidence??null}))??[],n=[],o=new Set;for(let e of[...r]){let t="string"==typeof e.side?e.side.toUpperCase():"HOLD",r="LONG"===t||"SHORT"===t?t:"HOLD",i=Number.isFinite(e.quantity)?e.quantity:0,s=e.symbol;s in op.MARKETS&&(o.has(s)||(o.add(s),n.push({symbol:s,side:r,quantity:i,leverage:e.leverage??null,profitTarget:e.profitTarget??null,stopLoss:e.stopLoss??null,invalidationCondition:e.invalidationCondition??null,confidence:e.confidence??null})))}let i=await oh(e,n),s=i.filter(e=>e.success),a=i.filter(e=>!e.success);for(let e of n)c.push({symbol:e.symbol,side:e.side,quantity:e.quantity,leverage:e.leverage,profitTarget:e.profitTarget,stopLoss:e.stopLoss,invalidationCondition:e.invalidationCondition,confidence:e.confidence});for(let e of i)p.push({symbol:e.symbol,side:e.side,quantity:e.quantity,leverage:e.leverage??null,success:e.success,error:e.error??null});await oG.toolCalls.create({data:{invocationId:y.id,toolCallType:tA,metadata:JSON.stringify({decisions:n,results:i})}}),await (0,oV.revalidateDataTags)(oV.DATA_CACHE_TAGS.INVOCATIONS,oV.DATA_CACHE_TAGS.POSITIONS),s.length>0&&console.log(` Opened positions: ${s.map(e=>e.symbol).join(", ")}`),a.length>0&&console.log(` Failed: ${a.map(e=>`${e.symbol} (${e.error})`).join(", ")}`);let l=e=>{let t=[e.symbol];return"HOLD"===e.side?t.push("HOLD"):t.push(e.side),Number.isFinite(e.quantity)&&t.push(`qty ${Math.abs(e.quantity??0).toPrecision(3)}`),Number.isFinite(e.leverage??void 0)&&t.push(`${e.leverage}x`),t.join(" ")},u="";return s.length>0&&(u+=`Successfully processed: ${s.map(l).join(", ")}. `),a.length>0&&(u+=`Failed: ${a.map(e=>`${l(e)} (${e.error??"unknown error"})`).join(", ")}`),u||"No positions were created"}}),closePosition:(0,tv.tool)({description:"Close the currently open positions for the provided market symbols",inputSchema:tE.object({symbols:tE.array(tE.enum(v)).describe("Array of symbols whose open positions should be closed")}),execute:async({symbols:t})=>{let r=await ob(e,t);for(let e of(await oG.toolCalls.create({data:{invocationId:y.id,toolCallType:"CLOSE_POSITION",metadata:JSON.stringify({symbols:t,closedPositions:r})}}),await (0,oV.revalidateDataTags)(oV.DATA_CACHE_TAGS.INVOCATIONS,oV.DATA_CACHE_TAGS.POSITIONS,oV.DATA_CACHE_TAGS.TRADES),r))d.push({symbol:e.symbol,side:e.side,quantity:e.quantity,entryPrice:e.entryPrice,exitPrice:e.exitPrice,netPnl:e.netPnl,realizedPnl:e.realizedPnl,unrealizedPnl:e.unrealizedPnl,closedAt:e.closedAt??null});let n=r.map(e=>{let t="LONG"===e.side?"LONG":"SHORT",r=null!=e.quantity?e.quantity.toFixed(4):"?";return`${e.symbol} (${t}) x ${r}`}).join(", ");return console.log(`Position(s) for ${t.join(", ")} closed successfully`),n.length>0?`Closed positions: ${n}`:`Position(s) for ${t.join(", ")} closed successfully`}})}});await oG.models.update({where:{id:e.id},data:{invocationCount:{increment:1},totalMinutes:{increment:5}}}),await (0,oV.revalidateDataTags)(oV.DATA_CACHE_TAGS.MODELS);let T=R.text.trim(),S=function({prompt:e,result:t,decisions:r,executionResults:n,closedPositions:o}){let i=t??{},s=i.response,a=null;return s?.timestamp instanceof Date?a=s.timestamp.toISOString():"string"==typeof s?.timestamp&&(a=s.timestamp),{prompt:e,decisions:r,executionResults:n,closedPositions:o,finishReason:i.finishReason??null,usage:i.usage??null,warnings:i.warnings??null,providerResponse:s?{id:"string"==typeof s.id?s.id:null,modelId:"string"==typeof s.modelId?s.modelId:null,timestamp:a}:null}}({prompt:_,result:R,decisions:c,executionResults:p,closedPositions:d});return await oG.invocations.update({where:{id:y.id},data:{response:T,responsePayload:S}}),await (0,oV.revalidateDataTags)(oV.DATA_CACHE_TAGS.INVOCATIONS),console.log(T),T}async function oX(){if(!globalThis.tradeIntervalRunning){globalThis.tradeIntervalRunning=!0;try{for(let e of(await oG.models.findMany())){if(!e.lighterApiKey){console.warn(`Model ${e.id} missing lighterApiKey; skipping scheduled trade`);continue}await oJ({apiKey:e.lighterApiKey,modelName:e.openRoutermodelName,name:e.name,invocationCount:e.invocationCount,id:e.id,accountIndex:e.accountIndex,totalMinutes:e.totalMinutes})}}catch(e){console.error("Scheduled trade execution failed",e)}finally{globalThis.tradeIntervalRunning=!1}}}function oQ(){globalThis.tradeIntervalHandle||(oX(),globalThis.tradeIntervalHandle=setInterval(()=>{oX()},3e5))}function oZ(e){if("number"==typeof e&&Number.isFinite(e))return e;if("string"==typeof e&&e.trim().length>0){let t=Number.parseFloat(e);if(Number.isFinite(t))return t}return null}function o0(e,t=2){let r=oZ(e);return null===r?"N/A":`$${r.toFixed(t)}`}function o1(e,t=4){let r=oZ(e);return null===r?"N/A":r.toFixed(t)}function o2(e,t=2){let r=oZ(e);return null===r?"N/A":`${r.toFixed(t)}%`}({get url(){return`file://${e.P("src/lib/tradeExecutor.ts")}`}}).main&&oQ();var o3=e.i(35344);async function o4(){console.log("[Portfolio Tracker] Recording portfolios...");let e=await o3.prisma.models.findMany();console.log(`[Portfolio Tracker] Found ${e.length} models`);let t=!1;for(let r of e)try{let e=await (0,tR.getPortfolio)({apiKey:r.lighterApiKey,modelName:r.openRoutermodelName,name:r.name,invocationCount:r.invocationCount,id:r.id,accountIndex:r.accountIndex,totalMinutes:r.totalMinutes});e&&e.total&&!isNaN(parseFloat(e.total))?(await o3.prisma.portfolioSize.create({data:{modelId:r.id,netPortfolio:e.total}}),t=!0,console.log(`[Portfolio Tracker]  Recorded ${r.name}: $${e.total}`)):console.warn(`[Portfolio Tracker] Invalid portfolio data for ${r.name}:`,e)}catch(e){console.error(`[Portfolio Tracker] Error recording portfolio for ${r.name}:`,e)}t&&await (0,oV.revalidateDataTags)(oV.DATA_CACHE_TAGS.PORTFOLIO_HISTORY)}async function o6(){if("undefined"!=typeof process&&"phase-production-build"===process.env.NEXT_PHASE)return D.NextResponse.json({status:"skipped",message:"Schedulers are not started during the production build phase"});let e=!0===globalThis.__schedulersInitialized;return e||(console.log(" Initializing schedulers..."),globalThis.portfolioIntervalHandle||(o4(),globalThis.portfolioIntervalHandle=setInterval(()=>{o4()},3e5)),oQ(),globalThis.__schedulersInitialized=!0,console.log(" Schedulers initialized")),D.NextResponse.json({status:"ok",message:e?"Schedulers already running":"Schedulers started",tradeInterval:globalThis.tradeIntervalHandle?"running":"not running",portfolioInterval:globalThis.portfolioIntervalHandle?"running":"not running"})}e.s(["GET",()=>o6],931533);var o5=e.i(931533);let o9=new v.AppRouteRouteModule({definition:{kind:E.RouteKind.APP_ROUTE,page:"/api/init-schedulers/route",pathname:"/api/init-schedulers",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/init-schedulers/route.ts",nextConfigOutput:"",userland:o5}),{workAsyncStorage:o7,workUnitAsyncStorage:o8,serverHooks:ie}=o9;function it(){return(0,w.patchFetch)({workAsyncStorage:o7,workUnitAsyncStorage:o8})}async function ir(e,t,r){o9.isDev&&(0,R.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let n="/api/init-schedulers/route";n=n.replace(/\/index$/,"")||"/";let o=await o9.prepare(e,t,{srcPage:n,multiZoneDraftMode:!1});if(!o)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:i,params:s,nextConfig:a,parsedUrl:l,isDraftMode:u,prerenderManifest:c,routerServerContext:p,isOnDemandRevalidate:d,revalidateOnlyGenerated:f,resolvedPathname:h,clientReferenceManifest:m,serverActionsManifest:y}=o,g=(0,x.normalizeAppPath)(n),b=!!(c.dynamicRoutes[g]||c.routes[h]),_=async()=>((null==p?void 0:p.render404)?await p.render404(e,t,l,!1):t.end("This page could not be found"),null);if(b&&!u){let e=!!c.routes[h],t=c.dynamicRoutes[g];if(t&&!1===t.fallback&&!e){if(a.experimental.adapterPath)return await _();throw new j.NoFallbackError}}let v=null;!b||o9.isDev||u||(v="/index"===(v=h)?"/":v);let w=!0===o9.isDev||!b,D=b&&!w;y&&m&&(0,S.setReferenceManifestsSingleton)({page:n,clientReferenceManifest:m,serverActionsManifest:y,serverModuleMap:(0,A.createServerModuleMap)({serverActionsManifest:y})});let U=e.method||"GET",M=(0,T.getTracer)(),B=M.getActiveScopeSpan(),$={params:s,prerenderManifest:c,renderOpts:{experimental:{authInterrupts:!!a.experimental.authInterrupts},cacheComponents:!!a.cacheComponents,supportsDynamicResponse:w,incrementalCache:(0,R.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:a.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,n)=>o9.onRequestError(e,t,n,p)},sharedContext:{buildId:i}},q=new O.NodeNextRequest(e),H=new O.NodeNextResponse(t),V=C.NextRequestAdapter.fromNodeNextRequest(q,(0,C.signalFromNodeResponse)(t));try{let o=async e=>o9.handle(V,$).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=M.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==k.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let o=r.get("next.route");if(o){let t=`${U} ${o}`;e.setAttributes({"next.route":o,"http.route":o,"next.span_name":t}),e.updateName(t)}else e.updateName(`${U} ${n}`)}),i=!!(0,R.getRequestMeta)(e,"minimalMode"),s=async s=>{var l,h;let m=async({previousCacheEntry:a})=>{try{if(!i&&d&&f&&!a)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await o(s);e.fetchMetrics=$.renderOpts.fetchMetrics;let l=$.renderOpts.pendingWaitUntil;l&&r.waitUntil&&(r.waitUntil(l),l=void 0);let u=$.renderOpts.collectedTags;if(!b)return await (0,P.sendResponse)(q,H,n,$.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,N.toNodeOutgoingHttpHeaders)(n.headers);u&&(t[L.NEXT_CACHE_TAGS_HEADER]=u),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==$.renderOpts.collectedRevalidate&&!($.renderOpts.collectedRevalidate>=L.INFINITE_CACHE)&&$.renderOpts.collectedRevalidate,o=void 0===$.renderOpts.collectedExpire||$.renderOpts.collectedExpire>=L.INFINITE_CACHE?void 0:$.renderOpts.collectedExpire;return{value:{kind:z.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:o}}}}catch(t){throw(null==a?void 0:a.isStale)&&await o9.onRequestError(e,t,{routerKind:"App Router",routePath:n,routeType:"route",revalidateReason:(0,I.getRevalidateReason)({isStaticGeneration:D,isOnDemandRevalidate:d})},p),t}},y=await o9.handleResponse({req:e,nextConfig:a,cacheKey:v,routeKind:E.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:c,isRoutePPREnabled:!1,isOnDemandRevalidate:d,revalidateOnlyGenerated:f,responseGenerator:m,waitUntil:r.waitUntil,isMinimalMode:i});if(!b)return null;if((null==y||null==(l=y.value)?void 0:l.kind)!==z.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==y||null==(h=y.value)?void 0:h.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});i||t.setHeader("x-nextjs-cache",d?"REVALIDATED":y.isMiss?"MISS":y.isStale?"STALE":"HIT"),u&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let g=(0,N.fromNodeOutgoingHttpHeaders)(y.value.headers);return i&&b||g.delete(L.NEXT_CACHE_TAGS_HEADER),!y.cacheControl||t.getHeader("Cache-Control")||g.get("Cache-Control")||g.set("Cache-Control",(0,F.getCacheControlHeader)(y.cacheControl)),await (0,P.sendResponse)(q,H,new Response(y.value.body,{headers:g,status:y.value.status||200})),null};B?await s(B):await M.withPropagatedContext(e.headers,()=>M.trace(k.BaseServerSpan.handleRequest,{spanName:`${U} ${n}`,kind:T.SpanKind.SERVER,attributes:{"http.method":U,"http.target":e.url}},s))}catch(t){if(t instanceof j.NoFallbackError||await o9.onRequestError(e,t,{routerKind:"App Router",routePath:g,routeType:"route",revalidateReason:(0,I.getRevalidateReason)({isStaticGeneration:D,isOnDemandRevalidate:d})}),b)throw t;return await (0,P.sendResponse)(q,H,new Response(null,{status:500})),null}}e.s(["handler",()=>ir,"patchFetch",()=>it,"routeModule",()=>o9,"serverHooks",()=>ie,"workAsyncStorage",()=>o7,"workUnitAsyncStorage",()=>o8],92346)}];

//# sourceMappingURL=node_modules_fe6bf85a._.js.map